import{d as z,u as A,m as D,r as y,b as K,a as U,n as M,c as o,p as _,f as i,w as t,g as e,k as s,t as G,h as d,q as H,s as J,v as O,x as Q,y as W,z as X,j as k,e as Y,F as Z,A as $,K as P,B as ee}from"./index-CyDSXOaL.js";import{i as te}from"./agent-CNPhGeWS.js";import{u as le}from"./user-ItrDjfEa.js";import{_ as ae}from"./_plugin-vue_export-helper-DlAUqK2U.js";const oe={class:"h-14 flex items-center justify-center text-white text-xl font-bold"},ne={class:"flex items-center"},se={class:"flex items-center"},ue={class:"flex items-center cursor-pointer"},re={class:"bg-white tabs-wrapper"},de=z({__name:"LayoutView",setup(ce){const b=le(),h=A(),x=D(),p=y(!1),f=y("/");K(()=>{te().then(a=>{b.userInfo=a.data.agent})});const u=U([{title:"首页",path:"/"}]),C=a=>{u.some(l=>l.path===a.path)||u.push(a)};M(()=>x.path,a=>{f.value=a,C({title:x.meta.title||"未命名",path:a})},{immediate:!0});const V=a=>{if(u.length<=1)return;const l=u;let n=f.value;n===a&&l.forEach((r,m)=>{if(r.path===a){const v=l[m+1]||l[m-1];v&&(n=v.path)}}),f.value=n,u.splice(u.findIndex(r=>r.path===a),1),h.push(n)},T=a=>{h.push(a.props.name)},B=()=>{p.value=!p.value},w=()=>{b.logout()};return(a,l)=>{const n=o("el-icon"),r=o("el-menu-item"),m=o("el-menu"),v=o("el-aside"),F=o("el-avatar"),L=o("el-dropdown-item"),R=o("el-dropdown-menu"),j=o("el-dropdown"),E=o("el-header"),I=o("el-tab-pane"),N=o("el-tabs"),S=o("router-view"),q=o("el-main"),g=o("el-container");return i(),_(g,{class:"h-screen"},{default:t(()=>[e(v,{width:p.value?"64px":"200px",class:"bg-gray-800"},{default:t(()=>[s("div",oe,G(d(b).site_name),1),e(m,{"default-active":d(x).path,collapse:p.value,"background-color":"#1F2937","text-color":"#fff","active-text-color":"#409EFF",router:"",class:"!border-0"},{default:t(()=>[e(r,{index:"/"},{default:t(()=>[e(n,null,{default:t(()=>[e(d(H))]),_:1}),l[1]||(l[1]=s("span",null,"首页",-1))]),_:1}),e(r,{index:"/users"},{default:t(()=>[e(n,null,{default:t(()=>[e(d(J))]),_:1}),l[2]||(l[2]=s("span",null,"下级列表",-1))]),_:1}),e(r,{index:"/withdraw"},{default:t(()=>[e(n,null,{default:t(()=>[e(d(O))]),_:1}),l[3]||(l[3]=s("span",null,"申请提现",-1))]),_:1}),e(r,{onClick:w},{default:t(()=>[e(n,null,{default:t(()=>[e(d(Q))]),_:1}),l[4]||(l[4]=s("span",null,"退出登录",-1))]),_:1})]),_:1},8,["default-active","collapse"])]),_:1},8,["width"]),e(g,null,{default:t(()=>[e(E,{class:"bg-white flex items-center justify-between px-4"},{default:t(()=>[s("div",ne,[e(n,{class:"cursor-pointer text-xl",onClick:B},{default:t(()=>[p.value?(i(),_(d(W),{key:0})):(i(),_(d(X),{key:1}))]),_:1})]),s("div",se,[e(j,null,{dropdown:t(()=>[e(R,null,{default:t(()=>[e(L,{onClick:w},{default:t(()=>l[6]||(l[6]=[k("退出登录")])),_:1})]),_:1})]),default:t(()=>[s("span",ue,[e(F,{size:32,class:"mr-2"}),l[5]||(l[5]=k(" 管理员 "))])]),_:1})])]),_:1}),s("div",re,[e(N,{modelValue:f.value,"onUpdate:modelValue":l[0]||(l[0]=c=>f.value=c),type:"card",class:"tabs-container",onTabRemove:V,onTabClick:T},{default:t(()=>[(i(!0),Y(Z,null,$(u,c=>(i(),_(I,{key:c.path,label:c.title,name:c.path,closable:u.length>1},null,8,["label","name","closable"]))),128))]),_:1},8,["modelValue"])]),e(q,{class:"bg-gray-100 p-4"},{default:t(()=>[e(S,null,{default:t(({Component:c})=>[(i(),_(P,null,[(i(),_(ee(c)))],1024))]),_:1})]),_:1})]),_:1})]),_:1})}}}),me=ae(de,[["__scopeId","data-v-323e6f0a"]]);export{me as default};
