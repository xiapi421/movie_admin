import{d as q,u as z,m as A,r as y,b as K,a as U,n as M,c as a,p,f as _,w as t,g as e,k as s,t as G,h as d,q as H,i as J,s as O,v as Q,x as W,y as X,z as Y,A as Z,B as $,j as k,e as P,F as ee,C as te,K as le,D as ne}from"./index-DDcJrcrq.js";import{u as ae}from"./user-Dy5tlLyt.js";import{i as oe}from"./agent-5zfBub88.js";import{_ as se}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ue={class:"h-14 flex items-center justify-center text-white text-xl font-bold"},de={class:"flex items-center"},re={class:"flex items-center"},ie={class:"flex items-center cursor-pointer"},_e={class:"bg-white tabs-wrapper"},pe=q({__name:"LayoutView",setup(ce){const x=ae(),w=z(),b=A(),c=y(!1),f=y("/");K(()=>{oe().then(n=>{x.userInfo=n.data.agent})});const r=U([{title:"首页",path:"/"}]),C=n=>{r.some(l=>l.path===n.path)||r.push(n)};M(()=>b.path,n=>{f.value=n,C({title:b.meta.title||"未命名",path:n})},{immediate:!0});const V=n=>{if(r.length<=1)return;const l=r;let o=f.value;o===n&&l.forEach((u,m)=>{if(u.path===n){const v=l[m+1]||l[m-1];v&&(o=v.path)}}),f.value=o,r.splice(r.findIndex(u=>u.path===n),1),w.push(o)},T=n=>{w.push(n.props.name)},B=()=>{c.value=!c.value},h=()=>{x.logout()};return(n,l)=>{const o=a("el-icon"),u=a("el-menu-item"),m=a("el-menu"),v=a("el-aside"),F=a("el-avatar"),L=a("el-dropdown-item"),R=a("el-dropdown-menu"),j=a("el-dropdown"),D=a("el-header"),E=a("el-tab-pane"),I=a("el-tabs"),N=a("router-view"),S=a("el-main"),g=a("el-container");return _(),p(g,{class:"h-screen"},{default:t(()=>[e(v,{width:c.value?"64px":"200px",class:"bg-gray-800"},{default:t(()=>[s("div",ue,G(d(x).site_name),1),e(m,{"default-active":d(b).path,collapse:c.value,"background-color":"#1F2937","text-color":"#fff","active-text-color":"#409EFF",router:"",class:"!border-0"},{default:t(()=>[e(u,{index:"/"},{default:t(()=>[e(o,null,{default:t(()=>[e(d(H))]),_:1}),l[1]||(l[1]=s("span",null,"首页",-1))]),_:1}),e(u,{index:"/settings"},{default:t(()=>[e(o,null,{default:t(()=>[e(d(J))]),_:1}),l[2]||(l[2]=s("span",null,"打赏设置",-1))]),_:1}),e(u,{index:"/theme"},{default:t(()=>[e(o,null,{default:t(()=>[e(d(O))]),_:1}),l[3]||(l[3]=s("span",null,"打赏皮肤",-1))]),_:1}),e(u,{index:"/promote"},{default:t(()=>[e(o,null,{default:t(()=>[e(d(Q))]),_:1}),l[4]||(l[4]=s("span",null,"推广链接",-1))]),_:1}),e(u,{index:"/income"},{default:t(()=>[e(o,null,{default:t(()=>[e(d(W))]),_:1}),l[5]||(l[5]=s("span",null,"收入记录",-1))]),_:1}),e(u,{index:"/withdraw"},{default:t(()=>[e(o,null,{default:t(()=>[e(d(X))]),_:1}),l[6]||(l[6]=s("span",null,"申请提现",-1))]),_:1}),e(u,{onClick:h},{default:t(()=>[e(o,null,{default:t(()=>[e(d(Y))]),_:1}),l[7]||(l[7]=s("span",null,"退出登录",-1))]),_:1})]),_:1},8,["default-active","collapse"])]),_:1},8,["width"]),e(g,null,{default:t(()=>[e(D,{class:"bg-white flex items-center justify-between px-4"},{default:t(()=>[s("div",de,[e(o,{class:"cursor-pointer text-xl",onClick:B},{default:t(()=>[c.value?(_(),p(d(Z),{key:0})):(_(),p(d($),{key:1}))]),_:1})]),s("div",re,[e(j,null,{dropdown:t(()=>[e(R,null,{default:t(()=>[e(L,{onClick:h},{default:t(()=>l[9]||(l[9]=[k("退出登录")])),_:1})]),_:1})]),default:t(()=>[s("span",ie,[e(F,{size:32,class:"mr-2"}),l[8]||(l[8]=k(" 管理员 "))])]),_:1})])]),_:1}),s("div",_e,[e(I,{modelValue:f.value,"onUpdate:modelValue":l[0]||(l[0]=i=>f.value=i),type:"card",class:"tabs-container",onTabRemove:V,onTabClick:T},{default:t(()=>[(_(!0),P(ee,null,te(r,i=>(_(),p(E,{key:i.path,label:i.title,name:i.path,closable:r.length>1},null,8,["label","name","closable"]))),128))]),_:1},8,["modelValue"])]),e(S,{class:"bg-gray-100 p-4"},{default:t(()=>[e(N,null,{default:t(({Component:i})=>[(_(),p(le,null,[(_(),p(ne(i)))],1024))]),_:1})]),_:1})]),_:1})]),_:1})}}}),be=se(pe,[["__scopeId","data-v-668338f0"]]);export{be as default};
