import{d as G,r as i,b as K,a as Q,n as X,c as s,e as q,f as B,k as x,g as t,w as o,j as c,h as k,N as Z,t as y,J as P,F as ee,C as ae,M as U}from"./index-B0g3vNeh.js";import{b as te,w as le}from"./agent-g1UaCc1y.js";import{u as oe}from"./user-nMTAoFSX.js";import{_ as ne}from"./_plugin-vue_export-helper-DlAUqK2U.js";var r=(_=>(_.Bank="0",_.Alipay="1",_.Wechat="2",_.USDT="3",_))(r||{});const se={class:"p-4"},re={class:"mb-4"},ue={class:"text-orange-500"},de={class:"flex justify-end mt-4"},pe={class:"flex justify-end gap-2"},ie=G({__name:"WithdrawView",setup(_){const{token:ce}=oe(),C=i([]),f=i(1),v=i(10),S=i(100),z=l=>{v.value=l,b()},T=l=>{f.value=l,b()},b=async()=>{try{const l=await te();console.log(l.data.data),C.value=l.data.data.map(e=>({id:e.id,money:e.money,withdraw_type:e.withdraw_type,payee:e.payee,payee_account:e.payee_account,qrcode_image:e.qrcode_image,trx_account:e.trx_account,status:e.status,create_time:e.create_time,update_time:e.update_time,handle_time:e.handle_time})),S.value=l.data.total,f.value=l.data.current_page,v.value=l.data.per_page}catch(l){U.error(l.message||"获取提现列表失败")}};K(()=>{b()});const Y=l=>({0:"info",1:"success",2:"danger"})[l],M=l=>l===0?"待审核":l===1?"已通过":"已驳回",m=i(!1),w=i(),p=i(r.Bank),n=Q({money:500,channel:r.Bank,payee:"",payee_account:"",qrcode_image:"",trx_account:"",txPassword:""}),H=[{label:"银行卡",value:r.Bank},{label:"支付宝",value:r.Alipay},{label:"微信",value:r.Wechat},{label:"USDT",value:r.USDT}],N={money:[{required:!0,message:"请输入提现金额",trigger:"blur"},{type:"number",min:500,message:"最低提现金额为500元",trigger:"blur"}],channel:[{required:!0,message:"请选择提现渠道",trigger:"change"}],payee:[{required:!0,message:"请输入收款姓名",trigger:"blur",validator:(l,e,u)=>{p.value===r.Bank&&!e?u(new Error("请输入收款姓名")):u()}}],payee_account:[{required:!0,message:"请输入收款账户",trigger:"blur",validator:(l,e,u)=>{p.value===r.Bank&&!e?u(new Error("请输入收款账户")):u()}}],txPassword:[{required:!0,message:"请输入提现密码",trigger:"blur"}]};X(p,l=>{n.channel=l,n.payee="",n.payee_account="",n.qrcode_image="",n.trx_account="",n.txPassword="",w.value&&w.value.clearValidate()});const W=()=>{m.value=!0},j=async l=>{l&&await l.validate(async e=>{if(e)try{await le(p.value,n.money,n.payee,n.payee_account,n.txPassword),U.success("提现申请提交成功"),m.value=!1,b(),p.value=r.Bank,n.payee="",n.payee_account=""}catch(u){U.error(u.message||"提现申请失败")}})},E=l=>{const e=["银行卡","支付宝","微信","USDT"];return console.log(l),console.log(e[l]),e[l]};return(l,e)=>{const u=s("el-icon"),V=s("el-button"),d=s("el-table-column"),D=s("el-tag"),F=s("el-table"),L=s("el-pagination"),R=s("el-card"),A=s("el-input-number"),g=s("el-form-item"),$=s("el-option"),I=s("el-select"),h=s("el-input"),J=s("el-form"),O=s("el-dialog");return B(),q("div",se,[x("div",re,[t(V,{type:"primary",onClick:W},{default:o(()=>[t(u,{class:"mr-1"},{default:o(()=>[t(k(Z))]),_:1}),e[10]||(e[10]=c("申请提现 "))]),_:1})]),t(R,null,{default:o(()=>[t(F,{data:C.value,border:"",stripe:""},{default:o(()=>[t(d,{prop:"id",label:"编号",width:"80"}),t(d,{prop:"money",label:"提现金额"},{default:o(({row:a})=>[x("span",ue,"￥"+y(a.money),1)]),_:1}),t(d,{prop:"withdraw_type",label:"提现渠道"},{default:o(({row:a})=>[t(D,null,{default:o(()=>[c(y(E(a.withdraw_type)),1)]),_:2},1024)]),_:1}),t(d,{prop:"payee",label:"收款姓名"}),t(d,{prop:"payee_account",label:"收款账户"}),t(d,{prop:"status",label:"状态"},{default:o(({row:a})=>[t(D,{type:Y(a.status)},{default:o(()=>[c(y(M(a.status)),1)]),_:2},1032,["type"])]),_:1}),t(d,{prop:"create_time",label:"申请时间"},{default:o(({row:a})=>[c(y(k(P)(a.create_time*1e3).format("YYYY-MM-DD HH:mm:ss")),1)]),_:1}),t(d,{prop:"handle_time",label:"审核时间"},{default:o(({row:a})=>[c(y(a.handle_time?k(P)(a.handle_time*1e3).format("YYYY-MM-DD HH:mm:ss"):"--"),1)]),_:1})]),_:1},8,["data"]),x("div",de,[t(L,{"current-page":f.value,"onUpdate:currentPage":e[0]||(e[0]=a=>f.value=a),"page-size":v.value,"onUpdate:pageSize":e[1]||(e[1]=a=>v.value=a),total:S.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next",onSizeChange:z,onCurrentChange:T},null,8,["current-page","page-size","total"])])]),_:1}),t(O,{modelValue:m.value,"onUpdate:modelValue":e[9]||(e[9]=a=>m.value=a),title:"申请提现",width:"500px"},{footer:o(()=>[x("div",pe,[t(V,{onClick:e[7]||(e[7]=a=>m.value=!1)},{default:o(()=>e[11]||(e[11]=[c("取消")])),_:1}),t(V,{type:"primary",onClick:e[8]||(e[8]=a=>j(w.value))},{default:o(()=>e[12]||(e[12]=[c("确认提现")])),_:1})])]),default:o(()=>[t(J,{ref_key:"formRef",ref:w,model:n,rules:N,"label-width":"100px"},{default:o(()=>[t(g,{label:"提现金额",prop:"amount"},{default:o(()=>[t(A,{modelValue:n.money,"onUpdate:modelValue":e[2]||(e[2]=a=>n.money=a),min:100,max:1e4,precision:2,style:{width:"100%"}},null,8,["modelValue"])]),_:1}),t(g,{label:"提现渠道",prop:"channel"},{default:o(()=>[t(I,{modelValue:p.value,"onUpdate:modelValue":e[3]||(e[3]=a=>p.value=a),style:{width:"100%"}},{default:o(()=>[(B(),q(ee,null,ae(H,a=>t($,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),t(g,{label:"收款姓名",prop:"payee"},{default:o(()=>[t(h,{modelValue:n.payee,"onUpdate:modelValue":e[4]||(e[4]=a=>n.payee=a)},null,8,["modelValue"])]),_:1}),t(g,{label:"收款账户",prop:"payee_account"},{default:o(()=>[t(h,{modelValue:n.payee_account,"onUpdate:modelValue":e[5]||(e[5]=a=>n.payee_account=a)},null,8,["modelValue"])]),_:1}),t(g,{label:"提现密码",prop:"txPassword"},{default:o(()=>[t(h,{modelValue:n.txPassword,"onUpdate:modelValue":e[6]||(e[6]=a=>n.txPassword=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),fe=ne(ie,[["__scopeId","data-v-07ac9c58"]]);export{fe as default};
