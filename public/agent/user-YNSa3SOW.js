import{R as f,S as g,r as s,T as m}from"./index-BFABqwMi.js";import{f as p,l as d}from"./agent-B-nrxP3w.js";const v=async(t,e)=>{try{return(await f("/user/login",{username:t,password:e})).data}catch(o){throw console.error("登录失败:",o),o}},y=g("user",()=>{const t=s("后台登录"),e=s(null),o=s("");async function u(n,i){var r;const a=await v(n,i);return a.code===1&&(e.value=a.data.userInfo,localStorage.setItem("token",((r=e.value)==null?void 0:r.token)||"")),a}async function c(){const n=await p();n.code===1&&(t.value=n.data.site_name)}async function l(){e.value=null,localStorage.removeItem("token"),await d(),m.push(o.value)}return{site_name:t,userInfo:e,loginUrl:o,login:u,logout:l,getInfos:c}});export{y as u};
