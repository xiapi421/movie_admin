import{r as t,u as a,a as e,z as s,b as o,e as d,g as n,i as r,j as c,t as i,F as l,p}from"./index-BcmmH5Xm.js";import{_ as h,u as m}from"./configStore-d83ksENX.js";const g={id:"topyd"},u={key:0,src:"https://img.cqrhl.com/html/frontend/android-s7z0E8aQ.jpg"},y={key:1,src:"https://img.cqrhl.com/html/frontend/ios-BKABQp9S.jpg"},v={id:"centeryd"},f={key:0,src:"https://img.cqrhl.com/html/frontend/androidydt-BaMkv61f.jpg"},j={key:1,src:"https://img.cqrhl.com/html/frontend/iosydt-DPit3BcZ.jpg"},k={id:"bottomyd"},x={style:{color:"green"}},b=h({__name:"PayView",setup(h){const b=o();m(),t("/android.jpg");const w=/iPhone/i.test(navigator.userAgent),A=/Android/i.test(navigator.userAgent),I=a(),_=I.params.tradeno,q=I.params.payurl,z=t("正在查询");let B=null;sessionStorage.getItem("ic"),e((()=>{const t=/MicroMessenger/i.test(navigator.userAgent);if(t&&A){const t="https://cloud.hzhph.com/index.php/api/index/androidCheat/pay/"+btoa(q),a=document.createElement("a");a.href=t,document.body.appendChild(a),a.click(),document.body.removeChild(a)}t||(window.location.href=q),S(),B=setInterval(S,5e3)})),s((()=>{B&&(clearInterval(B),B=null)}));const S=async()=>{try{const t=await fetch(`https://cloud.hzhph.com/index.php/api/index/checkOrderStatus?tradeno=${_}`),a=await t.json();1===a.code&&(z.value=a.data.status>0?"支付成功":"等待平台确认支付",a.data.status>0&&(clearInterval(B),C(a.data.status))),0===a.code&&(z.value=a.msg)}catch(t){z.value="查询失败，请稍后再试"}},C=t=>{b.push({path:"/player/"+t})};return(t,a)=>(p(),d(l,null,[n("div",g,[c(w)?r("",!0):(p(),d("img",u)),c(w)?(p(),d("img",y)):r("",!0)]),n("div",v,[c(w)?r("",!0):(p(),d("img",f)),c(w)?(p(),d("img",j)):r("",!0)]),n("div",k,[a[0]||(a[0]=n("p",{style:{color:"red"}},"请不要后退页面-订单完成后会自动跳转",-1)),a[1]||(a[1]=n("p",{style:{color:"red"}},"正在获取订单状态:",-1)),n("p",x,i(z.value),1),a[2]||(a[2]=n("div",{class:"loading-dots"},[n("span",{class:"dot"}),n("span",{class:"dot"}),n("span",{class:"dot"})],-1))])],64))}},[["__scopeId","data-v-540adc01"]]);export{b as default};
