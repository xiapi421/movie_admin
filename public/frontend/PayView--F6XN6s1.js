import{r as _,u as v,h as k,y as w,i as b,c as n,b as r,a as d,z as u,t as x,F as B,o as a}from"./index-BjaaUMmr.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";const j="/frontend/android-s7z0E8aQ.jpg",A="/frontend/ios-BKABQp9S.jpg",I="/frontend/androidydt-BaMkv61f.jpg",P="/frontend/iosydt-DPit3BcZ.jpg",C={id:"topyd"},M={key:0,src:j},V={key:1,src:A},E={id:"centeryd"},R={key:0,src:I},z={key:1,src:P},D={id:"bottomyd"},F={__name:"PayView",setup(N){const m=b();_("/android.jpg");const i=/iPhone/i.test(navigator.userAgent),h=/Android/i.test(navigator.userAgent),p=v(),g=p.params.tradeno,y=p.params.payurl,c=_("正在查询");let o=null;const f=localStorage.getItem("ic")||new URLSearchParams(window.location.search).get("ic");k(()=>{const e=/MicroMessenger/i.test(navigator.userAgent);if(e&&h){const t="http://47.76.212.222/index.php/api/index/androidCheat?payurl="+t,s=document.createElement("a");s.href=t,document.body.appendChild(s),console.log(s),s.click(),document.body.removeChild(s)}e||window.open(y,"_blank"),l(),o=setInterval(l,5e3)}),w(()=>{o&&(clearInterval(o),o=null)});const l=async()=>{try{const t=await(await fetch(`http://47.76.212.222/index.php/api/index/checkOrderStatus?tradeno=${g}`)).json();t.code===1&&(c.value=t.data.status===1?"支付成功":"等待平台确认支付",t.data.status===1&&(clearInterval(o),m.push({path:"/",query:{ic:f,tab:"purchased",refresh:"true"}}))),t.code===0&&(c.value=t.msg)}catch(e){console.error("检查订单状态失败:",e),c.value="查询失败，请稍后再试"}};return(e,t)=>(a(),n(B,null,[r("div",C,[u(i)?d("",!0):(a(),n("img",M)),u(i)?(a(),n("img",V)):d("",!0)]),r("div",E,[u(i)?d("",!0):(a(),n("img",R)),u(i)?(a(),n("img",z)):d("",!0)]),r("div",D,[t[0]||(t[0]=r("p",null,"正在获取订单状态:",-1)),r("p",null,x(c.value),1)])],64))}},U=S(F,[["__scopeId","data-v-52b340cb"]]);export{U as default};
