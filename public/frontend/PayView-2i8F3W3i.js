import{r as h,u as v,a as k,z as B,b as S,e as a,i as e,f as c,h as u,t as b,F as x,m as n}from"./index-CDeHAUGF.js";import{_ as I,u as j}from"./configStore-DUkX2rp5.js";const w="/frontend/android-s7z0E8aQ.jpg",A="/frontend/ios-BKABQp9S.jpg",C="/frontend/androidydt-BaMkv61f.jpg",z="/frontend/iosydt-DPit3BcZ.jpg",M={id:"topyd"},P={key:0,src:w},V={key:1,src:A},E={id:"centeryd"},D={key:0,src:C},F={key:1,src:z},N={id:"bottomyd"},O={__name:"PayView",setup(Q){const _=S();j(),h("/android.jpg");const r=/iPhone/i.test(navigator.userAgent),f=/Android/i.test(navigator.userAgent),p=v(),g=p.params.tradeno,l=p.params.payurl,d=h("正在查询");let o=null;sessionStorage.getItem("ic"),k(()=>{const s=/MicroMessenger/i.test(navigator.userAgent);if(s&&f){const t="https://cloud.hzhph.com/index.php/api/index/androidCheat/pay/"+btoa(l),i=document.createElement("a");i.href=t,document.body.appendChild(i),i.click(),document.body.removeChild(i)}s||(window.location.href=l),m(),o=setInterval(m,5e3)}),B(()=>{o&&(clearInterval(o),o=null)});const m=async()=>{try{const t=await(await fetch(`https://cloud.hzhph.com/index.php/api/index/checkOrderStatus?tradeno=${g}`)).json();t.code===1&&(d.value=t.data.status===1?"支付成功":"等待平台确认支付",(t.data.status===1||t.data.status===3)&&(clearInterval(o),y())),t.code===0&&(d.value=t.msg)}catch(s){console.error("检查订单状态失败:",s),d.value="查询失败，请稍后再试"}},y=()=>{_.push({path:"/home/"+localStorage.getItem("ic"),query:{tab:"purchased",refresh:"true"}})};return(s,t)=>(n(),a(x,null,[e("div",M,[u(r)?c("",!0):(n(),a("img",P)),u(r)?(n(),a("img",V)):c("",!0)]),e("div",E,[u(r)?c("",!0):(n(),a("img",D)),u(r)?(n(),a("img",F)):c("",!0)]),e("div",N,[t[0]||(t[0]=e("p",null,"请不要后退页面-订单完成后会自动跳转",-1)),t[1]||(t[1]=e("p",null,"正在获取订单状态:",-1)),e("p",null,b(d.value),1),t[2]||(t[2]=e("div",{class:"loading-dots"},[e("span",{class:"dot"}),e("span",{class:"dot"}),e("span",{class:"dot"})],-1))])],64))}},K=I(O,[["__scopeId","data-v-7fd185ef"]]);export{K as default};
