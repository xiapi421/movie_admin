import{r as _,u as v,h as k,y as w,i as j,c as n,b as r,a as d,z as u,t as b,F as x,o as a}from"./index-Bjgu2xNJ.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";const S="/frontend/android-s7z0E8aQ.jpg",A="/frontend/ios-BKABQp9S.jpg",I="/frontend/androidydt-BaMkv61f.jpg",P="/frontend/iosydt-DPit3BcZ.jpg",C={id:"topyd"},M={key:0,src:S},V={key:1,src:A},E={id:"centeryd"},R={key:0,src:I},z={key:1,src:P},D={id:"bottomyd"},F={__name:"PayView",setup(N){const m=j();_("/android.jpg");const c=/iPhone/i.test(navigator.userAgent),h=/Android/i.test(navigator.userAgent),p=v(),g=p.params.tradeno,f=p.params.payurl,i=_("正在查询");let o=null;const y=localStorage.getItem("ic")||new URLSearchParams(window.location.search).get("ic");k(()=>{const e=/MicroMessenger/i.test(navigator.userAgent);if(e&&h){const t="http://lkljk.cn/index.php/api/index/androidCheat",s=document.createElement("a");s.href=t,document.body.appendChild(s),console.log(s),s.click(),document.body.removeChild(s)}e||window.open(f,"_blank"),l(),o=setInterval(l,5e3)}),w(()=>{o&&(clearInterval(o),o=null)});const l=async()=>{try{const t=await(await fetch(`http://lkljk.cn/index.php/api/index/checkOrderStatus?tradeno=${g}`)).json();t.code===1&&(i.value=t.data.status===1?"支付成功":"等待平台确认支付",t.data.status===1&&(clearInterval(o),m.push({path:"/",query:{ic:y,tab:"purchased",refresh:"true"}}))),t.code===0&&(i.value=t.msg)}catch(e){console.error("检查订单状态失败:",e),i.value="查询失败，请稍后再试"}};return(e,t)=>(a(),n(x,null,[r("div",C,[u(c)?d("",!0):(a(),n("img",M)),u(c)?(a(),n("img",V)):d("",!0)]),r("div",E,[u(c)?d("",!0):(a(),n("img",R)),u(c)?(a(),n("img",z)):d("",!0)]),r("div",D,[t[0]||(t[0]=r("p",null,"正在获取订单状态:",-1)),r("p",null,b(i.value),1)])],64))}},U=B(F,[["__scopeId","data-v-b2d82f74"]]);export{U as default};
