import{y as E,a6 as x}from"./index-a89m00ZZ.js";import{_ as C}from"./popupForm.vue_vue_type_script_setup_true_lang-7qNirb5w.js";import{e as N}from"./real-_uPxEWJk.js";import{d as q,b as S,T,a as V}from"./index-_2pXKYgm.js";import{e as R,p as F,a as A,ar as B,z as D,m as s,W as L,o as p,h as M,v as n,N as f,V as P,l as a,O as c,Z as G,k as h,U as K,T as U,af as u}from"./vue-Dm6y8Cub.js";import"./index-0cs00J0z.js";import"./validate-CSwilFkA.js";import"./index-7hQ8xUGn.js";const $={class:"default-main ba-table-box"},O={slot:"footer",class:"dialog-footer"},te=R({name:"link",__name:"index",setup(j){const{t:e}=E.useI18n(),m=F(),_=q(["edit","delete"]),r=A({show:!1,data:[],selectedIds:[]}),k=o=>{r.selectedIds=o.map(t=>t.id)},y=async()=>{const o=l.getSelectionIds();if(o.length===0){u.warning(e("Please select at least one item"));return}try{const t=await N(o.join(","));t.code===1?(r.data=t.data,r.show=!0):u.error(t.msg||"检测失败")}catch(t){console.error(t),u.error("操作失败")}},l=new S(new x("/admin/Link/"),{pk:"id",column:[{type:"selection",align:"center",operator:!1},{label:e("link.id"),prop:"id",align:"center",width:70,operator:"RANGE",sortable:"custom"},{label:e("link.bucket"),prop:"bucket",align:"center",operatorPlaceholder:e("Fuzzy query"),operator:"LIKE",sortable:!1},{label:e("link.user_id"),prop:"user_id",align:"center",operator:"RANGE",sortable:!1},{label:e("link.url"),prop:"url",align:"center",operatorPlaceholder:e("Fuzzy query"),operator:"LIKE",sortable:!1},{label:e("link.zzurl"),prop:"zzurl",align:"center",operatorPlaceholder:e("Fuzzy query"),operator:"LIKE",sortable:!1},{label:e("link.ldurl"),prop:"ldurl",align:"center",operatorPlaceholder:e("Fuzzy query"),operator:"LIKE",sortable:!1},{label:e("link.status"),prop:"status",align:"center",render:"switch",operator:"eq",sortable:!1,replaceValue:{0:e("link.status 0"),1:e("link.status 1")}},{label:e("link.create_time"),prop:"create_time",align:"center",render:"datetime",operator:"RANGE",sortable:"custom",width:160,timeFormat:"yyyy-mm-dd hh:MM:ss"},{label:e("link.update_time"),prop:"update_time",align:"center",render:"datetime",operator:"RANGE",sortable:"custom",width:160,timeFormat:"yyyy-mm-dd hh:MM:ss"},{label:e("Operate"),align:"center",width:100,render:"buttons",buttons:_,operator:!1}],dblClickNotEditColumn:[void 0,"status"]},{defaultItems:{status:"1"}});return B("baTable",l),D(()=>{var o;l.table.ref=m.value,l.mount(),(o=l.getIndex())==null||o.then(()=>{l.initSort(),l.dragSort()})}),(o,t)=>{const g=s("el-alert"),w=s("Icon"),b=s("el-button"),i=s("el-table-column"),v=s("el-table"),I=s("el-dialog"),z=L("blur");return p(),M("div",$,[n(l).table.remark?(p(),f(g,{key:0,class:"ba-table-alert",title:n(l).table.remark,type:"info","show-icon":""},null,8,["title"])):P("",!0),a(T,{buttons:["refresh","add","edit","delete","comSearch","quickSearch","columnDisplay"],"quick-search-placeholder":n(e)("Quick search placeholder",{fields:n(e)("link.quick Search Fields")})},{default:c(()=>[G((p(),f(b,{class:"table-header-operate",type:"danger",style:{"margin-left":"10px"},onClick:t[0]||(t[0]=d=>y())},{default:c(()=>[a(w,{color:"#ffffff",name:"el-icon-RefreshRight"}),t[3]||(t[3]=h("span",{class:"table-header-operate-text"},"一键检测",-1))]),_:1})),[[z]])]),_:1},8,["quick-search-placeholder"]),a(V,{ref_key:"tableRef",ref:m},null,512),a(C),a(I,{modelValue:r.show,"onUpdate:modelValue":t[2]||(t[2]=d=>r.show=d),title:n(e)("link.check result"),width:"600px"},{default:c(()=>[a(v,{data:r.data,style:{width:"100%"},onSelectionChange:k},{default:c(()=>[a(i,{type:"selection",width:"55"}),a(i,{prop:"id",label:"ID"}),a(i,{prop:"url",label:"地址"}),a(i,{prop:"user_id",label:"代理id"}),a(i,{prop:"info",label:"信息"})]),_:1},8,["data"]),h("span",O,[a(b,{onClick:t[1]||(t[1]=d=>r.show=!1)},{default:c(()=>[K(U(n(e)("Cancel")),1)]),_:1})])]),_:1},8,["modelValue","title"])])}}});export{te as default};
