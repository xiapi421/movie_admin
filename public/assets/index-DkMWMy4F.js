import{y as E,a6 as T}from"./index-BdITTnvq.js";import{_ as N}from"./popupForm.vue_vue_type_script_setup_true_lang-BYj_vxxA.js";import{d as S,c as V}from"./real-B3e0Vvqg.js";import{d as q,b as z,T as R,a as A}from"./index-COr_pQ4H.js";import{e as K,p as F,a as O,ar as P,z as $,m as n,W as L,o as b,h as j,v as s,N as m,V as G,l as a,O as i,Z as M,k as h,U as _,T as y,af as c}from"./vue-Dm6y8Cub.js";import"./index-Bpw9Uyip.js";import"./validate-C2gH_gGh.js";import"./index-BPH6tQEd.js";const U={class:"default-main ba-table-box"},H={slot:"footer",class:"dialog-footer"},oe=K({name:"baiduyun",__name:"index",setup(Q){const{t:e}=E.useI18n(),f=F(),g=q(["edit","delete"]),o=O({show:!1,data:[],selectedIds:[]}),k=t=>{o.selectedIds=t.map(l=>l.id)},w=async()=>{if(o.selectedIds.length===0){c.warning(e("Please select at least one item to delete"));return}try{const t=await S(o.selectedIds.join(","));t.code===1?(c.success(e("Delete successful")),o.show=!1,r.getIndex()):c.error(t.msg)}catch(t){console.error(t),c.error(e("Operation failed"))}},I=async()=>{try{const t=await V();t.code===1?(o.data=t.data,o.show=!0):c.error("检测失败")}catch(t){console.error(t),c.error("操作失败")}},r=new z(new T("/admin/Baiduyun/"),{pk:"id",column:[{type:"selection",align:"center",operator:!1},{label:e("baiduyun.id"),prop:"id",align:"center",width:70,operator:"RANGE",sortable:"custom"},{label:"已用数量/100",prop:"used",align:"center",operator:"RANGE",sortable:!1},{label:e("baiduyun.area"),prop:"area",align:"center",operatorPlaceholder:e("Fuzzy query"),operator:"LIKE",sortable:!1},{label:e("baiduyun.apiKey"),prop:"apiKey",align:"center",operatorPlaceholder:e("Fuzzy query"),operator:"LIKE",sortable:!1},{label:e("baiduyun.secret"),prop:"secret",align:"center",operatorPlaceholder:e("Fuzzy query"),operator:"LIKE",sortable:!1},{label:e("Operate"),align:"center",width:100,render:"buttons",buttons:g,operator:!1}],dblClickNotEditColumn:[void 0]},{defaultItems:{}});return P("baTable",r),$(()=>{var t;r.table.ref=f.value,r.mount(),(t=r.getIndex())==null||t.then(()=>{r.initSort(),r.dragSort()})}),(t,l)=>{const v=n("el-alert"),C=n("Icon"),p=n("el-button"),d=n("el-table-column"),x=n("el-table"),B=n("el-dialog"),D=L("blur");return b(),j("div",U,[s(r).table.remark?(b(),m(v,{key:0,class:"ba-table-alert",title:s(r).table.remark,type:"info","show-icon":""},null,8,["title"])):G("",!0),a(R,{buttons:["refresh","add","edit","delete","comSearch","quickSearch","columnDisplay"],"quick-search-placeholder":s(e)("Quick search placeholder",{fields:s(e)("baiduyun.quick Search Fields")})},{default:i(()=>[M((b(),m(p,{class:"table-header-operate",type:"danger",style:{"margin-left":"10px"},onClick:l[0]||(l[0]=u=>I())},{default:i(()=>[a(C,{color:"#ffffff",name:"el-icon-RefreshRight"}),l[3]||(l[3]=h("span",{class:"table-header-operate-text"},"一键检测百度云",-1))]),_:1})),[[D]])]),_:1},8,["quick-search-placeholder"]),a(A,{ref_key:"tableRef",ref:f},null,512),a(N),a(B,{modelValue:o.show,"onUpdate:modelValue":l[2]||(l[2]=u=>o.show=u),title:s(e)("baiduyun.check result"),width:"600px"},{default:i(()=>[a(x,{data:o.data,style:{width:"100%"},onSelectionChange:k},{default:i(()=>[a(d,{type:"selection",width:"55"}),a(d,{prop:"id",label:"ID"}),a(d,{prop:"url",label:"地址"}),a(d,{prop:"status",label:"代理id"}),a(d,{prop:"info",label:"信息"})]),_:1},8,["data"]),h("span",H,[a(p,{onClick:l[1]||(l[1]=u=>o.show=!1)},{default:i(()=>[_(y(s(e)("Cancel")),1)]),_:1}),a(p,{type:"primary",onClick:w},{default:i(()=>[_(y(s(e)("Confirm Delete")),1)]),_:1})])]),_:1},8,["modelValue","title"])])}}});export{oe as default};
