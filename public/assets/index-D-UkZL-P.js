import{y as V,a6 as N}from"./index-bQSpXh7D.js";import{_ as S}from"./popupForm.vue_vue_type_script_setup_true_lang-x8OygLh1.js";import{f as q}from"./real-Dt7rxWKw.js";import{d as z,b as R,T as B,a as D}from"./index-DULCv6sW.js";import{e as A,p as F,a as L,ar as M,z as P,m as c,W as U,o as p,h as $,v as i,N as u,V as G,l as a,O as r,Z as K,k,aH as g,U as m,T as f,af as b}from"./vue-DR1O_Lo1.js";import"./index-CSV3-Vxn.js";import"./validate-DtEegpcc.js";import"./index-8MtoCBaz.js";const O={class:"default-main ba-table-box"},j={slot:"footer",class:"dialog-footer"},ae=A({name:"link",__name:"index",setup(H){const{t:e}=V.useI18n(),h=F(),w=z(["edit","delete"]),s=L({show:!1,data:[],selectedIds:[]}),y=o=>{s.selectedIds=o.map(t=>t.id)},v=async()=>{const o=l.getSelectionIds();if(o.length===0){b.warning(e("Please select at least one item"));return}try{const t=await q(o.join(","));t.code===1?(s.data=t.data,s.show=!0):b.error(t.msg||"检测失败")}catch(t){console.error(t),b.error("操作失败")}},l=new R(new N("/admin/Link/"),{pk:"id",column:[{type:"selection",align:"center",operator:!1},{label:e("link.id"),prop:"id",align:"center",width:70,operator:"RANGE",sortable:"custom"},{label:e("link.bucket"),prop:"bucket",align:"center",operatorPlaceholder:e("Fuzzy query"),operator:"LIKE",sortable:!1,width:150},{label:e("link.user_id"),prop:"user_id",align:"center",operator:"RANGE",sortable:!1},{label:e("link.url"),prop:"url",align:"center",operatorPlaceholder:e("Fuzzy query"),operator:"LIKE",sortable:!1,width:800},{label:"检测状态",prop:"check_status",align:"center",operatorPlaceholder:e("Fuzzy query"),operator:"LIKE",render:"tag",sortable:!1,replaceValue:{0:"正常",1:"正常",2:"域名被封",3:"域名被封"},custom:{0:"success",1:"success",2:"danger",3:"danger"},width:130},{label:e("link.status"),prop:"status",align:"center",render:"switch",operator:"eq",sortable:!1,replaceValue:{0:e("link.status 0"),1:e("link.status 1")}},{label:e("link.create_time"),prop:"create_time",align:"center",render:"datetime",operator:"RANGE",sortable:"custom",width:160,timeFormat:"yyyy-mm-dd hh:MM:ss"},{label:e("Operate"),align:"center",width:100,render:"buttons",buttons:w,operator:!1}],dblClickNotEditColumn:[void 0,"status"]},{defaultItems:{status:"1"}});return M("baTable",l),P(()=>{var o;l.table.ref=h.value,l.mount(),(o=l.getIndex())==null||o.then(()=>{l.initSort(),l.dragSort()})}),(o,t)=>{const I=c("el-alert"),x=c("Icon"),_=c("el-button"),d=c("el-table-column"),C=c("el-table"),E=c("el-dialog"),T=U("blur");return p(),$("div",O,[i(l).table.remark?(p(),u(I,{key:0,class:"ba-table-alert",title:i(l).table.remark,type:"info","show-icon":""},null,8,["title"])):G("",!0),a(B,{buttons:["refresh","add","edit","delete","comSearch","quickSearch","columnDisplay"],"quick-search-placeholder":i(e)("Quick search placeholder",{fields:i(e)("link.quick Search Fields")})},{default:r(()=>[K((p(),u(_,{class:"table-header-operate",type:"danger",style:{"margin-left":"10px"},onClick:t[0]||(t[0]=n=>v())},{default:r(()=>[a(x,{color:"#ffffff",name:"el-icon-RefreshRight"}),t[3]||(t[3]=k("span",{class:"table-header-operate-text"},"一键检测",-1))]),_:1})),[[T]])]),_:1},8,["quick-search-placeholder"]),a(D,{ref_key:"tableRef",ref:h},null,512),a(S),a(E,{modelValue:s.show,"onUpdate:modelValue":t[2]||(t[2]=n=>s.show=n),title:"链接检测结果",width:"1300px"},{default:r(()=>[a(C,{data:s.data,style:{width:"100%"},onSelectionChange:y},{default:r(()=>[a(d,{type:"selection",width:"55"}),a(d,{prop:"id",label:"ID",width:"80"}),a(d,{prop:"url",label:"地址","min-width":"900"}),a(d,{prop:"user_id",label:"代理id",width:"100"}),a(d,{prop:"info",label:"信息",width:"150"},{default:r(n=>[n.row.info=="域名微信内正常"?(p(),u(i(g),{key:0,type:"success"},{default:r(()=>[m(f(n.row.info),1)]),_:2},1024)):(p(),u(i(g),{key:1,type:"danger"},{default:r(()=>[m(f(n.row.info),1)]),_:2},1024))]),_:1})]),_:1},8,["data"]),k("span",j,[a(_,{onClick:t[1]||(t[1]=n=>s.show=!1)},{default:r(()=>[m(f(i(e)("Cancel")),1)]),_:1})])]),_:1},8,["modelValue"])])}}});export{ae as default};
