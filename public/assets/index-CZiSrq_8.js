import{y as T,a6 as N}from"./index-Uh2DvTxI.js";import{_ as S}from"./popupForm.vue_vue_type_script_setup_true_lang--ncDNKbs.js";import{d as V,c as q}from"./real-DdP6x1xu.js";import{d as z,b as R,T as A,a as K}from"./index-Cy849dwq.js";import{e as F,p as O,a as P,ar as $,z as L,m as i,W as j,o as u,h as G,v as c,N as f,V as M,l as a,O as s,Z as U,k as g,U as b,T as m,af as d}from"./vue-Dm6y8Cub.js";import"./index-5VskOyQt.js";import"./validate-BpEBWjy-.js";import"./index-Ccg1w6vP.js";const H={class:"default-main ba-table-box"},Q={slot:"footer",class:"dialog-footer"},le=F({name:"baiduyun",__name:"index",setup(W){const{t:e}=T.useI18n(),h=O(),w=z(["edit","delete"]),o=P({show:!1,data:[],selectedIds:[]}),k=t=>{o.selectedIds=t.map(l=>l.id)},I=async()=>{if(o.selectedIds.length===0){d.warning(e("Please select at least one item to delete"));return}try{const t=await V(o.selectedIds.join(","));t.code===1?(d.success(e("Delete successful")),o.show=!1,r.getIndex()):d.error(t.msg)}catch(t){console.error(t),d.error(e("Operation failed"))}},v=async()=>{try{const t=await q();t.code===1?(o.data=t.data,o.show=!0):d.error("检测失败")}catch(t){console.error(t),d.error("操作失败")}},r=new R(new N("/admin/Baiduyun/"),{pk:"id",column:[{type:"selection",align:"center",operator:!1},{label:e("baiduyun.id"),prop:"id",align:"center",width:70,operator:"RANGE",sortable:"custom"},{label:"已用数量/100",prop:"used",align:"center",operator:"RANGE",sortable:!1},{label:e("baiduyun.area"),prop:"area",align:"center",operatorPlaceholder:e("Fuzzy query"),operator:"LIKE",sortable:!1},{label:e("baiduyun.apiKey"),prop:"apiKey",align:"center",operatorPlaceholder:e("Fuzzy query"),operator:"LIKE",sortable:!1},{label:e("baiduyun.secret"),prop:"secret",align:"center",operatorPlaceholder:e("Fuzzy query"),operator:"LIKE",sortable:!1},{label:e("Operate"),align:"center",width:100,render:"buttons",buttons:w,operator:!1}],dblClickNotEditColumn:[void 0]},{defaultItems:{}});return $("baTable",r),L(()=>{var t;r.table.ref=h.value,r.mount(),(t=r.getIndex())==null||t.then(()=>{r.initSort(),r.dragSort()})}),(t,l)=>{const C=i("el-alert"),x=i("Icon"),_=i("el-button"),p=i("el-table-column"),y=i("el-tag"),B=i("el-table"),D=i("el-dialog"),E=j("blur");return u(),G("div",H,[c(r).table.remark?(u(),f(C,{key:0,class:"ba-table-alert",title:c(r).table.remark,type:"info","show-icon":""},null,8,["title"])):M("",!0),a(A,{buttons:["refresh","add","edit","delete","comSearch","quickSearch","columnDisplay"],"quick-search-placeholder":c(e)("Quick search placeholder",{fields:c(e)("baiduyun.quick Search Fields")})},{default:s(()=>[U((u(),f(_,{class:"table-header-operate",type:"danger",style:{"margin-left":"10px"},onClick:l[0]||(l[0]=n=>v())},{default:s(()=>[a(x,{color:"#ffffff",name:"el-icon-RefreshRight"}),l[3]||(l[3]=g("span",{class:"table-header-operate-text"},"一键检测百度云",-1))]),_:1})),[[E]])]),_:1},8,["quick-search-placeholder"]),a(K,{ref_key:"tableRef",ref:h},null,512),a(S),a(D,{modelValue:o.show,"onUpdate:modelValue":l[2]||(l[2]=n=>o.show=n),title:"百度云检测结果",width:"1300px"},{default:s(()=>[a(B,{data:o.data,style:{width:"100%"},onSelectionChange:k},{default:s(()=>[a(p,{type:"selection",width:"55"}),a(p,{prop:"id",label:"ID",width:"80"}),a(p,{prop:"url",label:"地址","min-width":"900"}),a(p,{prop:"status",label:"代理id"}),a(p,{prop:"info",label:"信息",width:"150"},{default:s(n=>[n.row.info=="域名微信内正常"?(u(),f(y,{key:0,type:"success"},{default:s(()=>[b(m(n.row.info),1)]),_:2},1024)):(u(),f(y,{key:1,type:"danger"},{default:s(()=>[b(m(n.row.info),1)]),_:2},1024))]),_:1})]),_:1},8,["data"]),g("span",Q,[a(_,{onClick:l[1]||(l[1]=n=>o.show=!1)},{default:s(()=>[b(m(c(e)("Cancel")),1)]),_:1}),a(_,{type:"primary",onClick:I},{default:s(()=>[b(m(c(e)("Confirm Delete")),1)]),_:1})])]),_:1},8,["modelValue"])])}}});export{le as default};
