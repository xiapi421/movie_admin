import{e as E,u as Te,S as oe,I as re,J as we,_ as z,y as _e,n as H,l as ve,h as j,K as xe,i as ne,L as Ze,z as Ee,M as ee,N as Ge,O as Qe,w as He,P as Ae,g as et,f as Ie,Q as ke,r as Ue,R as Le,T as tt,U as Oe,V as ot,W as at}from"./index-a89m00ZZ.js";import{u as Se,t as D}from"./terminal-CQ_gm6M5.js";import{e as I,a7 as K,m as p,o as u,h as M,v as e,V,j as ae,T as w,N as T,_ as F,X as le,Y as W,O as n,l as o,k as f,H as lt,M as te,a as q,f as Be,z as Y,a0 as ue,n as X,A as De,Z as O,aa as We,ab as Me,ac as nt,$ as qe,p as fe,a5 as se,U as $,W as ze,ad as st,ae as Ne,af as rt,ag as Re,ah as Ke,a9 as ut,B as it,ai as ct,i as Pe}from"./vue-Dm6y8Cub.js";import{_ as dt,D as mt}from"./darkSwitch-D31NstoS.js";import{c as ft,g as G,o as Fe,a as Ve,r as pe,s as pt,b as _t}from"./router-D2V2zp3K.js";import{I as vt,s as de}from"./index-_2pXKYgm.js";import{t as yt}from"./useDark-Cprms0EV.js";import{a as gt,i as bt}from"./index-DlBSfIfd.js";import{F as me}from"./index-0cs00J0z.js";import"./index-7hQ8xUGn.js";const Ct={class:"layout-logo"},ht={key:0,class:"logo-img",src:dt,alt:"logo"},kt=I({__name:"logo",setup(A){K(c=>({adf9ae48:e(t).layout.layoutMode!="Streamline"?e(t).getColorVal("menuTopBarBackground"):"transparent"}));const t=E(),l=Te(),i=function(){t.layout.shrink&&!t.layout.menuCollapse&&ft(),t.setLayout("menuCollapse",!t.layout.menuCollapse),oe.set(re,{layoutMode:t.layout.layoutMode,menuCollapse:t.layout.menuCollapse}),setTimeout(()=>{we()},350)};return(c,s)=>{const g=p("Icon");return u(),M("div",Ct,[e(t).layout.menuCollapse?V("",!0):(u(),M("img",ht)),e(t).layout.menuCollapse?V("",!0):(u(),M("div",{key:1,style:ae({color:e(t).getColorVal("menuActiveColor")}),class:"website-name"},w(e(l).siteName),5)),e(t).layout.layoutMode!="Streamline"?(u(),T(g,{key:2,onClick:i,name:e(t).layout.menuCollapse?"fa fa-indent":"fa fa-dedent",class:F([e(t).layout.menuCollapse?"unfold":"","fold"]),color:e(t).getColorVal("menuActiveColor"),size:"18"},null,8,["name","class","color"])):V("",!0)])}}}),je=z(kt,[["__scopeId","data-v-38fd2478"]]),wt=I({__name:"menuTree",props:{menus:{default:()=>[]},extends:{default:()=>({level:1})}},setup(A){K(s=>({"3a8d44ae":e(l).getColorVal("menuActiveBackground")}));const{t}=_e.useI18n(),l=E(),i=A,c=s=>{var g,d;if(((g=i.extends)==null?void 0:g.position)=="horizontal"&&i.extends.level<=1&&((d=s.children)!=null&&d.length)){const r=Ve(s.children);r?Fe(r):lt({type:"error",message:t("utils.No child menu to jump to!")})}};return(s,g)=>{const d=p("Icon"),r=p("menu-tree",!0),v=p("el-sub-menu"),y=p("el-menu-item");return u(!0),M(W,null,le(i.menus,m=>(u(),M(W,null,[m.children&&m.children.length>0?(u(),T(v,{onClick:a=>c(m),index:e(G)(m),key:e(G)(m)},{title:n(()=>{var a,b,B,_;return[o(d,{color:e(l).getColorVal("menuColor"),name:(a=m.meta)!=null&&a.icon?(b=m.meta)==null?void 0:b.icon:e(l).layout.menuDefaultIcon},null,8,["color","name"]),f("span",null,w((B=m.meta)!=null&&B.title?(_=m.meta)==null?void 0:_.title:s.$t("noTitle")),1)]}),default:n(()=>[o(r,{extends:{...i.extends,level:i.extends.level+1},menus:m.children},null,8,["extends","menus"])]),_:2},1032,["onClick","index"])):(u(),T(y,{onClick:a=>e(Fe)(m),index:e(G)(m),key:e(G)(m)},{default:n(()=>{var a,b,B,_;return[o(d,{color:e(l).getColorVal("menuColor"),name:(a=m.meta)!=null&&a.icon?(b=m.meta)==null?void 0:b.icon:e(l).layout.menuDefaultIcon},null,8,["color","name"]),f("span",null,w((B=m.meta)!=null&&B.title?(_=m.meta)==null?void 0:_.title:s.$t("noTitle")),1)]}),_:2},1032,["onClick","index"]))],64))),256)}}}),ye=z(wt,[["__scopeId","data-v-cddda623"]]),Tt=I({__name:"menuVertical",setup(A){K(r=>({"76d2e33a":s.value,"4a79107e":e(t).getColorVal("menuBackground"),"64c0459e":e(t).getColorVal("menuColor"),"3e529690":e(t).getColorVal("menuActiveColor")}));const t=E(),l=H(),i=te(),c=q({defaultActive:""}),s=Be(()=>{let r=0;return t.layout.menuShowTopBar&&(r=50),t.layout.layoutMode=="Default"?"calc(100vh - "+(32+r)+"px)":"calc(100vh - "+r+"px)"}),g=r=>{const v=l.getTabsViewDataByRoute(r);v&&(c.defaultActive=G(v,v.meta.matched))},d=()=>{X(()=>{var v;let r=document.querySelector(".el-menu.layouts-menu-vertical li.is-active");if(!r)return!1;(v=j.value)==null||v.setScrollTop(r.offsetTop)})};return Y(()=>{g(i),d()}),ue(r=>{g(r)}),(r,v)=>{const y=p("el-menu"),m=p("el-scrollbar");return u(),T(m,{ref_key:"layoutMenuScrollbarRef",ref:j,class:"vertical-menus-scrollbar"},{default:n(()=>[o(y,{class:"layouts-menu-vertical","collapse-transition":!1,"unique-opened":e(t).layout.menuUniqueOpened,"default-active":c.defaultActive,collapse:e(t).layout.menuCollapse,ref_key:"layoutMenuRef",ref:ve},{default:n(()=>[o(ye,{menus:e(l).state.tabsViewRoutes},null,8,["menus"])]),_:1},8,["unique-opened","default-active","collapse"])]),_:1},512)}}}),xt=I({__name:"menuVerticalChildren",setup(A){K(r=>({"20a77cc6":s.value,"6c5bc54d":e(t).getColorVal("menuBackground"),"7f8e9edc":e(t).getColorVal("menuColor"),fb6fcea8:e(t).getColorVal("menuActiveColor")}));const t=E(),l=H(),i=te(),c=q({defaultActive:"",routeChildren:[]}),s=Be(()=>{let r=0;return t.layout.menuShowTopBar&&(r=50),t.layout.layoutMode=="Default"?"calc(100vh - "+(32+r)+"px)":"calc(100vh - "+r+"px)"}),g=r=>{const v=l.getTabsViewDataByRoute(r);v&&(c.defaultActive=G(v,v.meta.matched));let y=l.getTabsViewDataByRoute(r,"above");y?y.children&&y.children.length>0?c.routeChildren=y.children:c.routeChildren=[y]:c.routeChildren||(c.routeChildren=l.state.tabsViewRoutes)},d=()=>{X(()=>{var v;let r=document.querySelector(".el-menu.layouts-menu-vertical-children li.is-active");if(!r)return!1;(v=j.value)==null||v.setScrollTop(r.offsetTop)})};return Y(()=>{g(i),d(),new xe(j.value.wrapRef)}),ue(r=>{g(r)}),(r,v)=>{const y=p("el-menu"),m=p("el-scrollbar");return u(),T(m,{ref_key:"layoutMenuScrollbarRef",ref:j,class:"children-vertical-menus-scrollbar"},{default:n(()=>[o(y,{class:"layouts-menu-vertical-children","collapse-transition":!1,"unique-opened":e(t).layout.menuUniqueOpened,"default-active":c.defaultActive,collapse:e(t).layout.menuCollapse,ref_key:"layoutMenuRef",ref:ve},{default:n(()=>[c.routeChildren.length>0?(u(),T(ye,{key:0,menus:c.routeChildren},null,8,["menus"])):V("",!0)]),_:1},8,["unique-opened","default-active","collapse"])]),_:1},512)}}}),St=I({name:"layout/aside",__name:"aside",setup(A){K(c=>({"12d2a223":i.value}));const t=E(),l=H(),i=Be(()=>t.menuWidth());return(c,s)=>{const g=p("el-aside");return e(l).state.tabFullScreen?V("",!0):(u(),T(g,{key:0,class:F("layout-aside-"+e(t).layout.layoutMode+" "+(e(t).layout.shrink?"shrink":""))},{default:n(()=>[e(t).layout.menuShowTopBar?(u(),T(je,{key:0})):V("",!0),e(t).layout.layoutMode=="Double"?(u(),T(xt,{key:1})):(u(),T(Tt,{key:2}))]),_:1},8,["class"]))}}}),$e=z(St,[["__scopeId","data-v-be977e32"]]);function Xe(){if(!De())throw new Error("useCurrentInstance() can only be used inside setup() or functional components!");const{appContext:A}=De();return{proxy:A.config.globalProperties}}const Bt={class:"el-dropdown-menu"},Mt=["onClick"],Rt=I({__name:"index",props:{width:{default:150},items:{default:()=>[]}},emits:["menuClick","hideContextmenu"],setup(A,{expose:t,emit:l}){const i=A,c=l,s=q({show:!1,axis:{x:0,y:0},sourceData:null,showArrow:!0,arrowAxis:10}),g=(v,y)=>{s.showArrow=!0,s.sourceData=v;const m=document.documentElement.clientHeight-y.y-(i.items.length*40+20),a=document.documentElement.clientWidth-y.x-(i.width+20);m<0&&(y.y+=m,s.showArrow=!1),a<0&&(y.x+=a,s.showArrow=!1),s.axis=y,s.show=!0},d=()=>{s.show=!1,c("hideContextmenu")},r=v=>{v.disabled||(v.sourceData=nt(s.sourceData),c("menuClick",v))};return t({onShowContextmenu:g,onHideContextmenu:d}),Y(()=>{ne(document,"click",d),ne(document,"scroll",d),ne(document,"keydown",v=>{v.key==="Escape"&&d()})}),(v,y)=>{const m=p("Icon");return u(),T(Me,{name:"el-zoom-in-center"},{default:n(()=>[O((u(),M("div",{class:"el-popper is-pure is-light el-dropdown__popper ba-contextmenu",style:ae(`top: ${s.axis.y+5}px;left: ${s.axis.x-14}px;width:${i.width}px`),key:Math.random(),"aria-hidden":"false","data-popper-placement":"bottom"},[f("ul",Bt,[(u(!0),M(W,null,le(i.items,(a,b)=>(u(),M("li",{key:b,class:F(["el-dropdown-menu__item",a.disabled?"is-disabled":""]),tabindex:"-1",onClick:B=>r(a)},[o(m,{size:"12",name:a.icon},null,8,["name"]),f("span",null,w(a.label),1)],10,Mt))),128))]),s.showArrow?(u(),M("span",{key:0,class:"el-popper__arrow",style:ae({left:`${s.arrowAxis}px`})},null,4)):V("",!0)],4)),[[We,s.show]])]),_:1})}}}),Vt=z(Rt,[["__scopeId","data-v-0380e8de"]]),$t=["onClick","onContextmenu"],At=I({__name:"tabs",setup(A,{expose:t}){K(C=>({"6f2fd06e":e(c).getColorVal("headerBarTabColor"),"6a84faa3":e(c).getColorVal("headerBarTabActiveColor"),"5a2975ba":e(c).layout.layoutMode=="Default"?"none":e(c).getColorVal("headerBarBackground")}));const l=te(),i=qe(),c=E(),s=H(),{proxy:g}=Xe(),d=fe(),r=Ze(),v=fe(),y=q({contextmenuItems:[{name:"refresh",label:"重新加载",icon:"fa fa-refresh"},{name:"close",label:"关闭标签",icon:"fa fa-times"},{name:"fullScreen",label:"当前标签全屏",icon:"el-icon-FullScreen"},{name:"closeOther",label:"关闭其他标签",icon:"fa fa-minus"},{name:"closeAll",label:"关闭全部标签",icon:"fa fa-stop"}]}),m=q({width:"0",transform:"translateX(0px)"}),a=C=>{i.push(C.fullPath)},b=function(C){if(!C)return!1;m.width=C.clientWidth+"px",m.transform=`translateX(${C.offsetLeft}px)`;let S=C.offsetLeft+C.clientWidth-d.value.clientWidth;C.offsetLeft<d.value.scrollLeft?d.value.scrollTo(C.offsetLeft,0):S>d.value.scrollLeft&&d.value.scrollTo(S,0)},B=()=>{const C=s.state.tabsView.slice(-1)[0];C?i.push(C.fullPath):i.push(Ee)},_=C=>{var S;s._closeTab(C),g.eventBus.emit("onTabViewClose",C),((S=s.state.activeRoute)==null?void 0:S.fullPath)===C.fullPath?B():(s._setActiveRoute(s.state.activeRoute),X(()=>{b(r.value[s.state.activeIndex])})),v.value.onHideContextmenu()},R=C=>{var S;s._closeTabs(C),s._setActiveRoute(C),((S=s.state.activeRoute)==null?void 0:S.fullPath)!==l.fullPath&&i.push(C.fullPath)},L=C=>{var x;let S=Ve(s.state.tabsViewRoutes);if(C&&S&&S.path==C.fullPath)return R(C);if(S&&S.path==((x=s.state.activeRoute)==null?void 0:x.fullPath))return R(s.state.activeRoute);s._closeTabs(!1),S&&pe(S.path)},J=(C,S)=>{y.contextmenuItems[0].disabled=l.fullPath!==C.fullPath,y.contextmenuItems[4].disabled=y.contextmenuItems[3].disabled=s.state.tabsView.length==1;const{clientX:x,clientY:N}=S;v.value.onShowContextmenu(C,{x,y:N})},P=C=>{const{name:S,sourceData:x}=C;if(x)switch(S){case"refresh":g.eventBus.emit("onTabViewRefresh",x);break;case"close":_(x);break;case"closeOther":R(x);break;case"closeAll":L(x);break;case"fullScreen":l.fullPath!==x.fullPath&&i.push(x.fullPath),s.setFullScreen(!0);break}},U=function(C){s._addTab(C),s._setActiveRoute(C),X(()=>{b(r.value[s.state.activeIndex])})};return ue(async C=>{U(C)}),Y(()=>{U(i.currentRoute.value),new xe(d.value)}),t({closeAllTab:L,closeTabByPath:C=>{for(const S in s.state.tabsView)if(s.state.tabsView[S].fullPath==C){_(s.state.tabsView[S]);break}},updateTabTitle:(C,S)=>{s._updateTabTitle(C,S),X(()=>{b(r.value[s.state.activeIndex])})}}),(C,S)=>{const x=p("Icon");return u(),M("div",{class:"nav-tabs",ref_key:"tabScrollbarRef",ref:d},[(u(!0),M(W,null,le(e(s).state.tabsView,(N,k)=>(u(),M("div",{onClick:h=>a(N),onContextmenu:se(h=>J(N,h),["prevent"]),class:F(["ba-nav-tab",e(s).state.activeIndex==k?"active":""]),ref_for:!0,ref:e(r).set,key:k},[$(w(N.meta.title)+" ",1),o(Me,{onAfterLeave:S[0]||(S[0]=h=>b(e(r)[e(s).state.activeIndex])),name:"el-fade-in"},{default:n(()=>[O(o(x,{class:"close-icon",onClick:se(h=>_(N),["stop"]),size:"15",name:"el-icon-Close"},null,8,["onClick"]),[[We,e(s).state.tabsView.length>1]])]),_:2},1024)],42,$t))),128)),f("div",{style:ae(m),class:"nav-tabs-active-box"},null,4),o(Vt,{ref_key:"contextmenuRef",ref:v,items:y.contextmenuItems,onMenuClick:P},null,8,["items"])],512)}}}),Ye=z(At,[["__scopeId","data-v-a252f3cb"]]),It={class:"layout-config-drawer"},Lt={class:"layout-mode-styles-box"},Dt={class:"layout-mode-box-style"},zt={class:"layout-mode-style-name"},Nt={class:"layout-mode-style-name"},Pt={class:"layout-mode-style-name"},Ft={class:"layout-mode-style-name"},Et={class:"layout-config-global"},Ht={class:"layout-config-aside"},Ut={class:"layout-config-aside"},Ot={class:"ba-center"},Wt=I({__name:"config",setup(A){const{t}=_e.useI18n(),l=E(),i=H(),c=qe(),s=(m,a)=>{l.setLayout(a,m)},g=(m,a)=>{if(m===null)return;const b=l.layout[a];l.layout.isDark?b[1]=m:b[0]=m,l.setLayout(a,b)},d=m=>{oe.set(re,{layoutMode:m,menuCollapse:l.layout.menuCollapse}),l.setLayoutMode(m)},r=(m,a)=>{l.setLayout(a,m);const b=i.state.tabsViewRoutes;i.setTabsViewRoutes([]),X(()=>{i.setTabsViewRoutes(b)})},v=()=>{l.setLayout("showDrawer",!1)},y=()=>{ee.remove(Ge),oe.remove(re),c.go(0)};return(m,a)=>{const b=p("el-divider"),B=p("el-col"),_=p("el-row"),R=p("el-form-item"),L=p("el-option"),J=p("el-select"),P=p("el-color-picker"),U=p("el-switch"),Z=p("el-input"),Q=p("el-button"),C=p("el-popconfirm"),S=p("el-form"),x=p("el-scrollbar"),N=p("el-drawer");return u(),M("div",It,[o(N,{"model-value":e(l).layout.showDrawer,title:e(t)("layouts.Layout configuration"),size:"310px",onClose:v},{default:n(()=>[o(x,{class:"layout-mode-style-scrollbar"},{default:n(()=>[o(S,{ref:"formRef",model:e(l).layout},{default:n(()=>[f("div",Lt,[o(b,{"border-style":"dashed"},{default:n(()=>[$(w(e(t)("layouts.Layout mode")),1)]),_:1}),f("div",Dt,[o(_,{class:"layout-mode-box-style-row",gutter:10},{default:n(()=>[o(B,{span:12},{default:n(()=>[f("div",{onClick:a[0]||(a[0]=k=>d("Default")),class:F(["layout-mode-style default",e(l).layout.layoutMode=="Default"?"active":""])},[a[21]||(a[21]=f("div",{class:"layout-mode-style-box"},[f("div",{class:"layout-mode-style-aside"}),f("div",{class:"layout-mode-style-container-box"},[f("div",{class:"layout-mode-style-header"}),f("div",{class:"layout-mode-style-container"})])],-1)),f("div",zt,w(e(t)("layouts.default")),1)],2)]),_:1}),o(B,{span:12},{default:n(()=>[f("div",{onClick:a[1]||(a[1]=k=>d("Classic")),class:F(["layout-mode-style classic",e(l).layout.layoutMode=="Classic"?"active":""])},[a[22]||(a[22]=f("div",{class:"layout-mode-style-box"},[f("div",{class:"layout-mode-style-aside"}),f("div",{class:"layout-mode-style-container-box"},[f("div",{class:"layout-mode-style-header"}),f("div",{class:"layout-mode-style-container"})])],-1)),f("div",Nt,w(e(t)("layouts.classic")),1)],2)]),_:1})]),_:1}),o(_,{gutter:10},{default:n(()=>[o(B,{span:12},{default:n(()=>[f("div",{onClick:a[2]||(a[2]=k=>d("Streamline")),class:F(["layout-mode-style streamline",e(l).layout.layoutMode=="Streamline"?"active":""])},[a[23]||(a[23]=f("div",{class:"layout-mode-style-box"},[f("div",{class:"layout-mode-style-container-box"},[f("div",{class:"layout-mode-style-header"}),f("div",{class:"layout-mode-style-container"})])],-1)),f("div",Pt,w(e(t)("layouts.Single column")),1)],2)]),_:1}),o(B,{span:12},{default:n(()=>[f("div",{onClick:a[3]||(a[3]=k=>d("Double")),class:F(["layout-mode-style double",e(l).layout.layoutMode=="Double"?"active":""])},[a[24]||(a[24]=f("div",{class:"layout-mode-style-box"},[f("div",{class:"layout-mode-style-aside"}),f("div",{class:"layout-mode-style-container-box"},[f("div",{class:"layout-mode-style-header"}),f("div",{class:"layout-mode-style-container"})])],-1)),f("div",Ft,w(e(t)("layouts.Double column")),1)],2)]),_:1})]),_:1})]),o(b,{"border-style":"dashed"},{default:n(()=>[$(w(e(t)("layouts.overall situation")),1)]),_:1}),f("div",Et,[o(R,{size:"large",label:e(t)("layouts.Dark mode")},{default:n(()=>[o(mt,{onClick:a[4]||(a[4]=k=>e(yt)())})]),_:1},8,["label"]),o(R,{label:e(t)("layouts.Background page switching animation")},{default:n(()=>[o(J,{onChange:a[5]||(a[5]=k=>s(k,"mainAnimation")),"model-value":e(l).layout.mainAnimation,placeholder:e(t)("layouts.Please select an animation name")},{default:n(()=>[o(L,{label:"slide-right",value:"slide-right"}),o(L,{label:"slide-left",value:"slide-left"}),o(L,{label:"el-fade-in-linear",value:"el-fade-in-linear"}),o(L,{label:"el-fade-in",value:"el-fade-in"}),o(L,{label:"el-zoom-in-center",value:"el-zoom-in-center"}),o(L,{label:"el-zoom-in-top",value:"el-zoom-in-top"}),o(L,{label:"el-zoom-in-bottom",value:"el-zoom-in-bottom"})]),_:1},8,["model-value","placeholder"])]),_:1},8,["label"])]),o(b,{"border-style":"dashed"},{default:n(()=>[$(w(e(t)("layouts.sidebar")),1)]),_:1}),f("div",Ht,[o(R,{label:e(t)("layouts.Side menu bar background color")},{default:n(()=>[o(P,{onChange:a[6]||(a[6]=k=>g(k,"menuBackground")),"model-value":e(l).getColorVal("menuBackground")},null,8,["model-value"])]),_:1},8,["label"]),o(R,{label:e(t)("layouts.Side menu text color")},{default:n(()=>[o(P,{onChange:a[7]||(a[7]=k=>g(k,"menuColor")),"model-value":e(l).getColorVal("menuColor")},null,8,["model-value"])]),_:1},8,["label"]),o(R,{label:e(t)("layouts.Side menu active item background color")},{default:n(()=>[o(P,{onChange:a[8]||(a[8]=k=>g(k,"menuActiveBackground")),"model-value":e(l).getColorVal("menuActiveBackground")},null,8,["model-value"])]),_:1},8,["label"]),o(R,{label:e(t)("layouts.Side menu active item text color")},{default:n(()=>[o(P,{onChange:a[9]||(a[9]=k=>g(k,"menuActiveColor")),"model-value":e(l).getColorVal("menuActiveColor")},null,8,["model-value"])]),_:1},8,["label"]),o(R,{label:e(t)("layouts.Show side menu top bar (logo bar)")},{default:n(()=>[o(U,{onChange:a[10]||(a[10]=k=>s(k,"menuShowTopBar")),"model-value":e(l).layout.menuShowTopBar},null,8,["model-value"])]),_:1},8,["label"]),o(R,{label:e(t)("layouts.Side menu top bar background color")},{default:n(()=>[o(P,{onChange:a[11]||(a[11]=k=>g(k,"menuTopBarBackground")),"model-value":e(l).getColorVal("menuTopBarBackground")},null,8,["model-value"])]),_:1},8,["label"]),o(R,{label:e(t)("layouts.Side menu width (when expanded)")},{default:n(()=>[o(Z,{onInput:a[12]||(a[12]=k=>s(k,"menuWidth")),type:"number",step:10,"model-value":e(l).layout.menuWidth},{append:n(()=>a[25]||(a[25]=[$("px")])),_:1},8,["model-value"])]),_:1},8,["label"]),o(R,{label:e(t)("layouts.Side menu default icon")},{default:n(()=>[o(vt,{onChange:a[13]||(a[13]=k=>r(k,"menuDefaultIcon")),"model-value":e(l).layout.menuDefaultIcon},null,8,["model-value"])]),_:1},8,["label"]),o(R,{label:e(t)("layouts.Side menu horizontal collapse")},{default:n(()=>[o(U,{onChange:a[14]||(a[14]=k=>s(k,"menuCollapse")),"model-value":e(l).layout.menuCollapse},null,8,["model-value"])]),_:1},8,["label"]),o(R,{label:e(t)("layouts.Side menu accordion")},{default:n(()=>[o(U,{onChange:a[15]||(a[15]=k=>s(k,"menuUniqueOpened")),"model-value":e(l).layout.menuUniqueOpened},null,8,["model-value"])]),_:1},8,["label"])]),o(b,{"border-style":"dashed"},{default:n(()=>[$(w(e(t)("layouts.Top bar")),1)]),_:1}),f("div",Ut,[o(R,{label:e(t)("layouts.Top bar background color")},{default:n(()=>[o(P,{onChange:a[16]||(a[16]=k=>g(k,"headerBarBackground")),"model-value":e(l).getColorVal("headerBarBackground")},null,8,["model-value"])]),_:1},8,["label"]),o(R,{label:e(t)("layouts.Top bar text color")},{default:n(()=>[o(P,{onChange:a[17]||(a[17]=k=>g(k,"headerBarTabColor")),"model-value":e(l).getColorVal("headerBarTabColor")},null,8,["model-value"])]),_:1},8,["label"]),o(R,{label:e(t)("layouts.Background color when hovering over the top bar")},{default:n(()=>[o(P,{onChange:a[18]||(a[18]=k=>g(k,"headerBarHoverBackground")),"model-value":e(l).getColorVal("headerBarHoverBackground")},null,8,["model-value"])]),_:1},8,["label"]),o(R,{label:e(t)("layouts.Top bar menu active item background color")},{default:n(()=>[o(P,{onChange:a[19]||(a[19]=k=>g(k,"headerBarTabActiveBackground")),"model-value":e(l).getColorVal("headerBarTabActiveBackground")},null,8,["model-value"])]),_:1},8,["label"]),o(R,{label:e(t)("layouts.Top bar menu active item text color")},{default:n(()=>[o(P,{onChange:a[20]||(a[20]=k=>g(k,"headerBarTabActiveColor")),"model-value":e(l).getColorVal("headerBarTabActiveColor")},null,8,["model-value"])]),_:1},8,["label"])]),o(C,{onConfirm:y,title:e(t)("layouts.Are you sure you want to restore all configurations to the default values?")},{reference:n(()=>[f("div",Ot,[o(Q,{class:"w80",type:"info"},{default:n(()=>[$(w(e(t)("layouts.Restore default")),1)]),_:1})])]),_:1},8,["title"])])]),_:1},8,["model"])]),_:1})]),_:1},8,["model-value","title"])])}}}),qt=z(Wt,[["__scopeId","data-v-64de73d3"]]),Kt={class:"command"},jt={class:"task-opt"},Xt=["onClick"],Yt={class:"terminal-buttons"},Jt={class:"config-buttons"},Zt=I({__name:"index",setup(A){const{t}=_e.useI18n(),l=Se(),i=fe(),c=q({registryLoading:!1,registryLoadingType:"npm",packageManagerLoading:!1}),s=m=>{let a=t("terminal.unknown"),b="info";switch(m){case D.Waiting:a=t("terminal.Waiting for execution"),b="info";break;case D.Connecting:a=t("terminal.Connecting"),b="warning";break;case D.Executing:a=t("terminal.Executing"),b="warning";break;case D.Success:a=t("terminal.Successful execution"),b="success";break;case D.Failed:a=t("terminal.Execution failed"),b="danger";break;case D.Unknown:a=t("terminal.Unknown execution result"),b="danger";break}return{statusText:a,statusType:b}},g=(m,a,b=!0,B="",_=()=>{})=>{a?l.addTaskPM(m,b,B,_):l.addTask(m,b,B,_),X(()=>{i.value&&i.value.wrapRef&&i.value.setScrollTop(i.value.wrapRef.scrollHeight)})},d=()=>{Ne.confirm(t("terminal.Are you sure you want to republish?"),t("Reminder"),{confirmButtonText:t("Confirm"),cancelButtonText:t("Cancel"),type:"warning"}).then(()=>{g("web-build",!0,!0,"",()=>{})})},r=m=>{c.packageManagerLoading=!0,Qe({manager:m}).then(a=>{a.code==1&&l.changePackageManager(m)}).finally(()=>{c.packageManagerLoading=!1})},v=(m,a)=>{const b=a=="npm"?l.state.npmRegistry:l.state.composerRegistry;l.changeRegistry(m,a),c.registryLoading=!0,c.registryLoadingType=a,l.addTask(`set-${a}-registry.${m}`,!1,"",B=>{c.registryLoading=!1,(B==D.Failed||B==D.Unknown)&&Ne.confirm(t("terminal.Failed to modify the source command, Please try again manually"),t("Reminder"),{confirmButtonText:t("Confirm"),showCancelButton:!1,type:"warning"}).then(()=>{l.changeRegistry(b,a)})})},y=m=>{let a={};return m=="npm"?a={npm:"npm",taobao:"taobao",tencent:"tencent"}:m=="composer"&&(a={composer:"composer",huawei:"huawei",aliyun:"aliyun",tencent:"tencent",kkame:"kkame"}),l.state[m=="npm"?"npmRegistry":"composerRegistry"]=="unknown"&&(a.unknown=t("Unknown")),a};return Y(()=>{l.init()}),(m,a)=>{const b=p("el-alert"),B=p("el-tag"),_=p("el-button"),R=p("Icon"),L=p("el-card"),J=p("el-timeline-item"),P=p("el-timeline"),U=p("el-empty"),Z=p("el-dropdown-item"),Q=p("el-dropdown-menu"),C=p("el-dropdown"),S=p("el-dialog"),x=p("el-form"),N=ze("blur"),k=ze("loading");return u(),M("div",null,[o(S,{modelValue:e(l).state.show,"onUpdate:modelValue":a[6]||(a[6]=h=>e(l).state.show=h),title:e(t)("terminal.Terminal"),class:"ba-terminal-dialog main-dialog"},{default:n(()=>[o(e(st),{ref_key:"terminalScrollbarRef",ref:i,"max-height":500,class:"terminal-scrollbar"},{default:n(()=>[e(l).state.phpDevelopmentServer?V("",!0):(u(),T(b,{key:0,class:"terminal-warning-alert",title:e(t)("terminal.The current terminal is not running under the installation service, and some commands may not be executed"),type:"error"},null,8,["title"])),e(l).state.taskList.length?(u(),T(P,{key:1,class:"terminal-timeline"},{default:n(()=>[(u(!0),M(W,null,le(e(l).state.taskList,(h,ie)=>(u(),T(J,{key:ie,class:F(["task-item","task-status-"+h.status]),type:s(h.status).statusType,center:"",timestamp:h.createTime,placement:"top"},{default:n(()=>[o(L,null,{default:n(()=>[f("div",null,[o(B,{type:s(h.status).statusType},{default:n(()=>[$(w(s(h.status).statusText),1)]),_:2},1032,["type"]),(h.status==e(D).Failed||h.status==e(D).Unknown)&&h.blockOnFailure?(u(),T(B,{key:0,class:"block-on-failure-tag",type:"warning"},{default:n(()=>[$(w(e(t)("terminal.Failure to execute this command will block the execution of the queue")),1)]),_:1})):V("",!0),h.status==e(D).Executing||h.status==e(D).Connecting?(u(),T(B,{key:1,class:"block-on-failure-tag",type:"danger"},{default:n(()=>[$(w(e(t)("terminal.Do not refresh the browser")),1)]),_:1})):V("",!0),f("span",Kt,w(h.command),1),f("div",jt,[h.status==e(D).Failed||h.status==e(D).Unknown?O((u(),T(_,{key:0,title:e(t)("Retry"),size:"small",type:"warning",icon:"el-icon-RefreshRight",circle:"",onClick:ce=>e(l).retryTask(ie)},null,8,["title","onClick"])),[[N]]):V("",!0),O(o(_,{onClick:ce=>e(l).delTask(ie),title:e(t)("Delete"),size:"small",type:"danger",icon:"el-icon-Delete",circle:""},null,8,["onClick","title"]),[[N]])])]),h.status!=e(D).Waiting?(u(),M(W,{key:0},[h.status!=e(D).Connecting&&h.status!=e(D).Executing?(u(),M("div",{key:0,onClick:ce=>e(l).setTaskShowMessage(ie),class:"toggle-message-display"},[f("span",null,w(e(t)("terminal.Command run log")),1),o(R,{name:h.showMessage?"el-icon-ArrowUp":"el-icon-ArrowDown",size:"16",color:"#909399"},null,8,["name"])],8,Xt)):V("",!0),h.status==e(D).Connecting||h.status==e(D).Executing||h.status>e(D).Executing&&h.showMessage?(u(),M("div",{key:1,class:F(["exec-message","exec-message-"+h.uuid])},[(u(!0),M(W,null,le(h.message,(ce,Je)=>(u(),M("pre",{key:Je,class:"message-item"},w(ce),1))),128))],2)):V("",!0)],64)):V("",!0)]),_:2},1024)]),_:2},1032,["class","type","timestamp"]))),128))]),_:1})):(u(),T(U,{key:2,"image-size":80,description:e(t)("terminal.No mission yet")},null,8,["description"]))]),_:1},512),f("div",Yt,[O((u(),T(_,{class:"terminal-menu-item",icon:"el-icon-MagicStick",onClick:a[0]||(a[0]=h=>g("test",!0,!1))},{default:n(()=>[$(w(e(t)("terminal.Test command")),1)]),_:1})),[[N]]),o(C,{class:"terminal-menu-item"},{dropdown:n(()=>[o(Q,null,{default:n(()=>[e(l).state.packageManager!="none"?(u(),T(Z,{key:0,onClick:a[1]||(a[1]=h=>g("web-install",!0))},{default:n(()=>[$(w(e(l).state.packageManager)+" run install ",1)]),_:1})):V("",!0),o(Z,{onClick:a[2]||(a[2]=h=>g("composer.update",!1))},{default:n(()=>a[9]||(a[9]=[$("composer update")])),_:1})]),_:1})]),default:n(()=>[O((u(),T(_,{icon:"el-icon-Download"},{default:n(()=>[$(w(e(t)("terminal.Install dependent packages")),1)]),_:1})),[[N]])]),_:1}),O((u(),T(_,{class:"terminal-menu-item",icon:"el-icon-Sell",onClick:a[3]||(a[3]=h=>d())},{default:n(()=>[$(w(e(t)("terminal.Republish")),1)]),_:1})),[[N]]),O((u(),T(_,{class:"terminal-menu-item",icon:"el-icon-Delete",onClick:a[4]||(a[4]=h=>e(l).clearSuccessTask())},{default:n(()=>[$(w(e(t)("terminal.Clean up task list")),1)]),_:1})),[[N]]),O((u(),T(_,{class:"terminal-menu-item",icon:"el-icon-Tools",onClick:a[5]||(a[5]=h=>e(l).toggleConfigDialog())},{default:n(()=>[$(w(e(t)("terminal.Terminal settings")),1)]),_:1})),[[N]])])]),_:1},8,["modelValue","title"]),o(S,{onClose:a[8]||(a[8]=h=>e(l).toggleConfigDialog(!1)),"model-value":e(l).state.showConfig,class:"ba-terminal-dialog",title:e(t)("terminal.Terminal settings")},{default:n(()=>[o(x,{"label-position":"left","label-width":"140"},{default:n(()=>[O((u(),T(me,{label:"NPM "+e(t)("terminal.Source"),"model-value":e(l).state.npmRegistry,key:e(l).state.npmRegistry,type:"select","input-attr":{border:!0,content:y("npm"),teleported:!1,onChange:h=>v(h,"npm")}},null,8,["label","model-value","input-attr"])),[[k,c.registryLoading&&c.registryLoadingType=="npm"]]),O((u(),T(me,{label:"Composer "+e(t)("terminal.Source"),"model-value":e(l).state.composerRegistry,key:e(l).state.composerRegistry,type:"select","input-attr":{border:!0,content:y("composer"),teleported:!1,onChange:h=>v(h,"composer")}},null,8,["label","model-value","input-attr"])),[[k,c.registryLoading&&c.registryLoadingType=="composer"]]),O(o(me,{label:e(t)("terminal.NPM package manager"),"model-value":e(l).state.packageManager,type:"select","input-attr":{border:!0,content:{npm:"NPM",cnpm:"CNPM",pnpm:"PNPM",yarn:"YARN",ni:"NI",none:e(t)("terminal.Manual execution")},teleported:!1,onChange:h=>r(h)},tip:e(t)("terminal.NPM package manager tip")},null,8,["label","model-value","input-attr","tip"]),[[k,c.packageManagerLoading]]),o(me,{label:e(t)("terminal.Clear successful task"),"model-value":e(l).state.automaticCleanupTask,type:"radio","input-attr":{border:!0,content:{0:e(t)("Disable"),1:e(t)("Enable")},onChange:e(l).changeAutomaticCleanupTask},tip:e(t)("terminal.Clear successful task tip")},null,8,["label","model-value","input-attr","tip"])]),_:1}),f("div",Jt,[o(_,{onClick:a[7]||(a[7]=h=>e(l).toggleConfigDialog(!1))},{default:n(()=>[$(w(e(t)("terminal.Back to terminal")),1)]),_:1})])]),_:1},8,["model-value","title"])])}}}),Gt=z(Zt,[["__scopeId","data-v-3d8b491f"]]),Qt={class:"el-popover__title"},eo={class:"reload-hot-server-content"},to={class:"reload-hot-server-buttons"},oo={class:"nav-menu-item"},ao={class:"admin-name"},lo={class:"admin-info-base"},no={class:"admin-info-other"},so={class:"admin-info-name"},ro={class:"admin-info-lasttime"},uo={class:"admin-info-footer"},io=I({__name:"navMenus",setup(A){K(B=>({"5ca3095c":e(i).getColorVal("headerBarBackground"),"14fceebc":e(i).getColorVal("headerBarTabColor"),bd2aa36c:e(i).getColorVal("headerBarHoverBackground")}));const{t}=_e.useI18n(),l=He(),i=E(),c=Se(),s=Te(),g=fe(),d=q({isFullScreen:!1,currentNavMenu:"",showLayoutDrawer:!1,showAdminInfoPopover:!1}),r=(B,_)=>{d.currentNavMenu=B?_:""},v=B=>{var _;B=="cancel"&&((_=g.value)==null||_.hide())},y=()=>{if(!de.isEnabled)return rt.warning(t("layouts.Full screen is not supported")),!1;de.toggle(),de.onchange(()=>{d.isFullScreen=de.isFullscreen})},m=()=>{d.showAdminInfoPopover=!1,pe({name:"routine/adminInfo"})},a=()=>{gt().then(()=>{ee.remove(ke),Ue.go(0)})},b=B=>{if(B=="storage"||B=="all"){const _=ee.get(ke),R=ee.get(Le);if(oe.clear(),ee.clear(),ee.set(ke,_),ee.set(Le,R),B=="storage")return}tt(B).then(()=>{})};return(B,_)=>{const R=p("el-button"),L=p("Icon"),J=p("el-popover"),P=p("router-link"),U=p("el-dropdown-item"),Z=p("el-dropdown-menu"),Q=p("el-dropdown"),C=p("el-badge"),S=p("el-avatar");return u(),M("div",{class:F(["nav-menus",e(i).layout.layoutMode])},[e(Ae).dirtyFile?(u(),T(J,{key:0,ref_key:"reloadHotServerPopover",ref:g,onShow:_[2]||(_[2]=x=>r(!0,"reloadHotServer")),onHide:_[3]||(_[3]=x=>r(!1,"reloadHotServer")),width:360},{reference:n(()=>[f("div",{class:F(["nav-menu-item",d.currentNavMenu=="reloadHotServer"?"hover":""])},[o(L,{color:"var(--el-color-danger)",class:"nav-menu-icon",name:"el-icon-Warning",size:"18"})],2)]),default:n(()=>[f("div",null,[f("div",Qt,w(e(t)("vite.Reload hot server title")),1),f("div",eo,[f("p",null,[f("span",null,w(e(t)("vite.Reload hot server tips 1")),1),f("span",null,"【"+w(e(t)(`vite.Close type ${e(Ae).closeType}`))+"】",1),f("span",null,w(e(t)("vite.Reload hot server tips 2")),1)]),f("p",null,w(e(t)("vite.Reload hot server tips 3")),1),f("div",to,[o(R,{onClick:_[0]||(_[0]=x=>v("cancel"))},{default:n(()=>[$(w(e(t)("vite.Later")),1)]),_:1}),o(R,{onClick:_[1]||(_[1]=x=>v("reload")),type:"primary"},{default:n(()=>[$(w(e(t)("vite.Restart hot update")),1)]),_:1})])])])]),_:1},512)):V("",!0),o(P,{class:"h100",target:"_blank",title:e(t)("Home"),to:"/"},{default:n(()=>[f("div",oo,[o(L,{color:e(i).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"el-icon-Monitor",size:"18"},null,8,["color"])])]),_:1},8,["title"]),o(Q,{onVisibleChange:_[4]||(_[4]=x=>r(x,"lang")),class:"h100",size:"large","hide-timeout":50,placement:"bottom",trigger:"click","hide-on-click":!0},{dropdown:n(()=>[o(Z,{class:"dropdown-menu-box"},{default:n(()=>[(u(!0),M(W,null,le(e(i).lang.langArray,x=>(u(),T(U,{key:x.name,onClick:N=>e(et)(x.name)},{default:n(()=>[$(w(x.value),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),default:n(()=>[f("div",{class:F(["nav-menu-item pt2",d.currentNavMenu=="lang"?"hover":""])},[o(L,{color:e(i).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"local-lang",size:"18"},null,8,["color"])],2)]),_:1}),f("div",{onClick:y,class:F(["nav-menu-item",d.isFullScreen?"hover":""])},[d.isFullScreen?(u(),T(L,{key:0,color:e(i).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"local-full-screen-cancel",size:"18"},null,8,["color"])):(u(),T(L,{key:1,color:e(i).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"el-icon-FullScreen",size:"18"},null,8,["color"]))],2),e(l).super?(u(),M("div",{key:1,onClick:_[5]||(_[5]=x=>e(c).toggle()),class:"nav-menu-item pt2"},[o(C,{"is-dot":e(c).state.showDot},{default:n(()=>[o(L,{color:e(i).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"local-terminal",size:"26"},null,8,["color"])]),_:1},8,["is-dot"])])):V("",!0),e(l).super?(u(),T(Q,{key:2,onVisibleChange:_[9]||(_[9]=x=>r(x,"clear")),class:"h100",size:"large","hide-timeout":50,placement:"bottom",trigger:"click","hide-on-click":!0},{dropdown:n(()=>[o(Z,{class:"dropdown-menu-box"},{default:n(()=>[o(U,{onClick:_[6]||(_[6]=x=>b("tp"))},{default:n(()=>[$(w(e(t)("utils.Clean up system cache")),1)]),_:1}),o(U,{onClick:_[7]||(_[7]=x=>b("storage"))},{default:n(()=>[$(w(e(t)("utils.Clean up browser cache")),1)]),_:1}),o(U,{onClick:_[8]||(_[8]=x=>b("all")),divided:""},{default:n(()=>[$(w(e(t)("utils.Clean up all cache")),1)]),_:1})]),_:1})]),default:n(()=>[f("div",{class:F(["nav-menu-item",d.currentNavMenu=="clear"?"hover":""])},[o(L,{color:e(i).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"el-icon-Delete",size:"18"},null,8,["color"])],2)]),_:1})):V("",!0),e(s).userInitialize?(u(),T(J,{key:3,onShow:_[10]||(_[10]=x=>r(!0,"adminInfo")),onHide:_[11]||(_[11]=x=>r(!1,"adminInfo")),placement:"bottom-end","hide-after":0,width:260,trigger:"click","popper-class":"admin-info-box",visible:d.showAdminInfoPopover,"onUpdate:visible":_[12]||(_[12]=x=>d.showAdminInfoPopover=x)},{reference:n(()=>[f("div",{class:F(["admin-info",d.currentNavMenu=="adminInfo"?"hover":""])},[o(S,{size:25,src:e(Ie)(e(l).avatar)},null,8,["src"]),f("div",ao,w(e(l).nickname),1)],2)]),default:n(()=>[f("div",null,[f("div",lo,[o(S,{size:70,src:e(Ie)(e(l).avatar)},null,8,["src"]),f("div",no,[f("div",so,w(e(l).nickname),1),f("div",ro,w(e(l).last_login_time),1)])]),f("div",uo,[o(R,{onClick:m,type:"primary",plain:""},{default:n(()=>[$(w(e(t)("layouts.personal data")),1)]),_:1}),o(R,{onClick:a,type:"danger",plain:""},{default:n(()=>[$(w(e(t)("layouts.cancellation")),1)]),_:1})])])]),_:1},8,["visible"])):V("",!0),f("div",{onClick:_[13]||(_[13]=x=>e(i).setLayout("showDrawer",!0)),class:"nav-menu-item"},[o(L,{color:e(i).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"fa fa-cogs",size:"18"},null,8,["color"])]),o(qt),o(Gt)],2)}}}),ge=z(io,[["__scopeId","data-v-a5a7d96a"]]),co={class:"nav-bar"},mo=I({__name:"default",setup(A){K(l=>({"67abd059":e(t).getColorVal("headerBarTabColor"),f0bff19a:e(t).getColorVal("headerBarTabActiveColor"),"00d66b4c":e(t).getColorVal("headerBarTabActiveBackground")}));const t=E();return(l,i)=>(u(),M("div",co,[o(Ye,{ref_key:"layoutNavTabsRef",ref:Oe},null,512),o(ge)]))}}),fo=z(mo,[["__scopeId","data-v-528ceb49"]]),po={class:"nav-bar"},_o={key:0,class:"unfold"},vo=I({__name:"classic",setup(A){K(i=>({"737cd666":e(t).getColorVal("headerBarBackground"),"0af9a26d":e(t).getColorVal("headerBarTabColor"),"88760b72":e(t).getColorVal("headerBarTabActiveColor"),"7cfea179":e(t).getColorVal("headerBarHoverBackground"),e21b7690:e(t).getColorVal("headerBarTabActiveBackground")}));const t=E(),l=()=>{pt("ba-aside-menu-shade",()=>{t.setLayout("menuCollapse",!0)}),t.setLayout("menuCollapse",!1)};return(i,c)=>{const s=p("Icon");return u(),M("div",po,[e(t).layout.shrink&&e(t).layout.menuCollapse?(u(),M("div",_o,[o(s,{onClick:l,name:"fa fa-indent",color:e(t).getColorVal("menuActiveColor"),size:"18"},null,8,["color"])])):V("",!0),e(t).layout.shrink?V("",!0):(u(),T(Ye,{key:1,ref_key:"layoutNavTabsRef",ref:Oe},null,512)),o(ge)])}}}),yo=z(vo,[["__scopeId","data-v-952ef580"]]),go={class:"layouts-menu-horizontal"},bo={key:0,class:"menu-horizontal-logo"},Co=I({__name:"menuHorizontal",setup(A){K(d=>({"4dc345d5":e(t).getColorVal("headerBarHoverBackground"),"4bf8e79e":e(t).getColorVal("menuBackground"),"13719fa1":e(t).getColorVal("menuColor"),d3617f0a:e(t).getColorVal("menuActiveColor"),f2c081f8:e(t).getColorVal("menuActiveBackground")}));const t=E(),l=H(),i=te(),c=q({defaultActive:""}),s=d=>{const r=l.getTabsViewDataByRoute(d);r&&(c.defaultActive=G(r,r.meta.matched))},g=()=>{X(()=>{var r;let d=document.querySelector(".el-menu.menu-horizontal li.is-active");if(!d)return!1;(r=j.value)==null||r.setScrollTop(d.offsetTop)})};return Y(()=>{s(i),g(),new xe(j.value.wrapRef)}),ue(d=>{s(d)}),(d,r)=>{const v=p("el-menu"),y=p("el-scrollbar");return u(),M("div",go,[e(t).layout.menuShowTopBar?(u(),M("div",bo,[o(je)])):V("",!0),o(y,{ref_key:"layoutMenuScrollbarRef",ref:j,class:"horizontal-menus-scrollbar"},{default:n(()=>[o(v,{ref_key:"layoutMenuRef",ref:ve,class:"menu-horizontal",mode:"horizontal","default-active":c.defaultActive},{default:n(()=>[o(ye,{extends:{position:"horizontal",level:1},menus:e(l).state.tabsViewRoutes},null,8,["menus"])]),_:1},8,["default-active"])]),_:1},512),o(ge)])}}}),ho=z(Co,[["__scopeId","data-v-851fe78f"]]),ko={class:"layouts-menu-horizontal-double"},wo=I({__name:"double",setup(A){K(d=>({"20aa761e":e(t).getColorVal("menuBackground"),"04a10121":e(t).getColorVal("menuColor"),"57cf81fb":e(t).getColorVal("menuActiveColor"),"7a8c6d84":e(t).getColorVal("menuActiveBackground")}));const t=E(),l=H(),i=te(),c=q({defaultActive:""}),s=d=>{const r=l.getTabsViewDataByRoute(d);r&&(c.defaultActive=G(r,r.meta.matched))},g=()=>{X(()=>{var r;let d=document.querySelector(".el-menu.menu-horizontal li.is-active");if(!d)return!1;(r=j.value)==null||r.setScrollTop(d.offsetTop)})};return Y(()=>{s(i),g()}),ue(d=>{s(d)}),(d,r)=>{const v=p("el-menu"),y=p("el-scrollbar");return u(),M("div",ko,[o(y,{ref_key:"layoutMenuScrollbarRef",ref:j,class:"double-menus-scrollbar"},{default:n(()=>[o(v,{ref_key:"layoutMenuRef",ref:ve,class:"menu-horizontal",mode:"horizontal","default-active":c.defaultActive},{default:n(()=>[o(ye,{extends:{position:"horizontal",level:1},menus:e(l).state.tabsViewRoutes},null,8,["menus"])]),_:1},8,["default-active"])]),_:1},512),o(ge)])}}}),To=z(wo,[["__scopeId","data-v-2e8c780c"]]),xo=I({name:"layout/header",components:{DefaultNavBar:fo,ClassicNavBar:yo,StreamlineNavBar:ho,DoubleNavBar:To},__name:"header",setup(A){const t=E(),l=H();return(i,c)=>{const s=p("el-header");return e(l).state.tabFullScreen?V("",!0):(u(),T(s,{key:0,class:"layout-header"},{default:n(()=>[(u(),T(Re(e(t).layout.layoutMode+"NavBar")))]),_:1}))}}}),be=z(xo,[["__scopeId","data-v-9014eea9"]]),So=I({name:"layout/main",__name:"main",setup(A){const{proxy:t}=Xe(),l=te(),i=E(),c=H(),s=q({componentKey:l.fullPath,keepAliveComponentNameList:[]}),g=function(r){if(r){if(s.keepAliveComponentNameList.find(y=>y===r))return;s.keepAliveComponentNameList.push(r)}},d=()=>{var r;if(c.state.activeRoute){const v=c.getTabsViewDataByRoute(c.state.activeRoute);v&&typeof((r=v.meta)==null?void 0:r.keepalive)=="string"&&g(v.meta.keepalive)}};return Ke(()=>{t.eventBus.on("onTabViewRefresh",r=>{s.keepAliveComponentNameList=s.keepAliveComponentNameList.filter(v=>r.meta.keepalive!==v),s.componentKey="",X(()=>{s.componentKey=r.fullPath,g(r.meta.keepalive)})}),t.eventBus.on("onTabViewClose",r=>{s.keepAliveComponentNameList=s.keepAliveComponentNameList.filter(v=>r.meta.keepalive!==v)})}),ut(()=>{t.eventBus.off("onTabViewRefresh"),t.eventBus.off("onTabViewClose")}),Y(()=>{d()}),it(()=>l.fullPath,()=>{s.componentKey=l.fullPath,d()}),(r,v)=>{const y=p("router-view"),m=p("el-scrollbar"),a=p("el-main");return u(),T(a,{class:"layout-main"},{default:n(()=>[o(m,{class:"layout-main-scrollbar",style:ae(e(ot)),ref_key:"layoutMainScrollbarRef",ref:at},{default:n(()=>[o(y,null,{default:n(({Component:b})=>[o(Me,{name:e(i).layout.mainAnimation,mode:"out-in"},{default:n(()=>[(u(),T(ct,{include:s.keepAliveComponentNameList},[(u(),T(Re(b),{key:s.componentKey}))],1032,["include"]))]),_:2},1032,["name"])]),_:1})]),_:1},8,["style"])]),_:1})}}}),Ce=z(So,[["__scopeId","data-v-93dd102f"]]),Bo=["title"],Mo=I({__name:"closeFullScreen",setup(A){const t=H(),l=q({closeBoxTop:20});Y(()=>{setTimeout(()=>{l.closeBoxTop=-30},300)});const i=()=>{l.closeBoxTop=20},c=()=>{l.closeBoxTop=-30},s=()=>{t.setFullScreen(!1)};return(g,d)=>{const r=p("Icon");return u(),M("div",{title:g.$t("layouts.Exit full screen"),onMouseover:se(i,["stop"]),onMouseout:se(c,["stop"])},[f("div",{onClick:se(s,["stop"]),class:"close-full-screen",style:ae({top:l.closeBoxTop+"px"})},[o(r,{name:"el-icon-Close"})],4),d[0]||(d[0]=f("div",{class:"close-full-screen-on"},null,-1))],40,Bo)}}}),he=z(Mo,[["__scopeId","data-v-0aa634f1"]]),Ro=I({__name:"default",setup(A){const t=H();return(l,i)=>{const c=p("el-container");return u(),M(W,null,[o(c,{class:"layout-container"},{default:n(()=>[o($e),o(c,{class:"content-wrapper"},{default:n(()=>[o(be),o(Ce)]),_:1})]),_:1}),e(t).state.tabFullScreen?(u(),T(he,{key:0})):V("",!0)],64)}}}),Vo=z(Ro,[["__scopeId","data-v-59d252c1"]]),$o=I({__name:"classic",setup(A){const t=H();return(l,i)=>{const c=p("el-container");return u(),M(W,null,[o(c,{class:"layout-container"},{default:n(()=>[o($e),o(c,{class:"content-wrapper"},{default:n(()=>[o(be),o(Ce)]),_:1})]),_:1}),e(t).state.tabFullScreen?(u(),T(he,{key:0})):V("",!0)],64)}}}),Ao=z($o,[["__scopeId","data-v-fb349671"]]),Io=I({__name:"streamline",setup(A){const t=H();return(l,i)=>{const c=p("el-container");return u(),M(W,null,[o(c,{class:"layout-container"},{default:n(()=>[o(c,{class:"content-wrapper"},{default:n(()=>[o(be),o(Ce)]),_:1})]),_:1}),e(t).state.tabFullScreen?(u(),T(he,{key:0})):V("",!0)],64)}}}),Lo=z(Io,[["__scopeId","data-v-fcdc1bd3"]]),Do=I({__name:"double",setup(A){const t=H();return(l,i)=>{const c=p("el-container");return u(),M(W,null,[o(c,{class:"layout-container"},{default:n(()=>[o($e),o(c,{class:"content-wrapper"},{default:n(()=>[o(be),o(Ce)]),_:1})]),_:1}),e(t).state.tabFullScreen?(u(),T(he,{key:0})):V("",!0)],64)}}}),zo=z(Do,[["__scopeId","data-v-d08319bd"]]),jo=I({components:{Default:Vo,Classic:Ao,Streamline:Lo,Double:zo},__name:"index",setup(A){const t=Se(),l=H(),i=E(),c=te(),s=Te(),g=He(),d=q({autoMenuCollapseLock:!1});Y(()=>{if(!g.token)return Ue.push({name:"adminLogin"});r(),we(),ne(window,"resize",we)}),Ke(()=>{v(),ne(window,"resize",v)});const r=()=>{bt().then(y=>{if(s.dataFill(y.data.siteConfig),t.changePackageManager(y.data.terminal.npmPackageManager),t.changePHPDevelopmentServer(y.data.terminal.phpDevelopmentServer),s.setInitialize(!0),Pe(y.data.adminInfo)||(g.dataFill(y.data.adminInfo),s.setUserInitialize(!0)),y.data.menus){if(_t(y.data.menus),c.params.to){const a=JSON.parse(c.params.to);if(a.path!=Ee){let b=Pe(a.query)?{}:a.query;pe({path:a.path,query:b});return}}let m=Ve(l.state.tabsViewRoutes);m&&pe(m.path)}})},v=()=>{let y={layoutMode:i.layout.layoutMode,menuCollapse:i.layout.menuCollapse},m=oe.get(re);if(m||oe.set(re,y),document.body.clientWidth<1024)d.autoMenuCollapseLock||(d.autoMenuCollapseLock=!0,i.setLayout("menuCollapse",!0)),i.setLayout("shrink",!0),i.setLayoutMode("Classic");else{d.autoMenuCollapseLock=!1;let b=m||y;i.setLayout("menuCollapse",b.menuCollapse),i.setLayout("shrink",!1),i.setLayoutMode(b.layoutMode)}};return(y,m)=>(u(),T(Re(e(i).layout.layoutMode)))}});export{jo as default};
