import{y as R,a6 as A}from"./index-B9Z1v9hZ.js";import{_ as C}from"./popupForm.vue_vue_type_script_setup_true_lang-BHez1cCt.js";import{d as T,b as B,T as D,a as F}from"./index-BXQZGekF.js";import{u as G,i as V,d as S,e as $}from"./real-h0F6s-dH.js";import{e as q,p as z,ar as M,z as P,m as h,W as J,o as i,h as H,v as g,N as p,V as K,l as s,O as d,Z as c,k as u,af as m,ae as y}from"./vue-Dm6y8Cub.js";import"./index-Bb8dY7NZ.js";import"./index-DrXFYgkH.js";const L={class:"default-main ba-table-box"},ee=q({name:"videos",__name:"index",setup(O){const{t:a}=R.useI18n(),v=z(),_=T(["edit","delete"]),w=()=>{console.log("updateJson"),G().then(()=>{})},x=()=>{console.log("autoUpdateJson")},k=()=>{console.log("clearHot")},E=()=>{const t=document.createElement("input");t.type="file",t.accept=".txt,.csv",t.onchange=e=>{var r;const b=(r=e.target.files)==null?void 0:r[0];if(b){const l=new FormData;l.append("file",b),V(l).then(n=>{m.success("导入成功"),o.getIndex()}).catch(n=>{m.error("导入失败："+n.message)})}},t.click()},N=()=>{y.prompt("请输入新的视频域名","修改视频域名",{confirmButtonText:"确定",cancelButtonText:"取消",inputPlaceholder:"请输入域名，例如: http://example.com",inputPattern:/^https?:\/\/.+/,inputErrorMessage:"请输入正确的域名格式(以http://或https://开头)"}).then(({value:t})=>{S(t).then(()=>{m.success("域名修改成功"),o.getIndex()}).catch(()=>{m.error("域名修改失败")})}).catch(()=>{})},I=()=>{y.prompt("请输入新的图片域名","修改图片域名",{confirmButtonText:"确定",cancelButtonText:"取消",inputPlaceholder:"请输入域名，例如: http://example.com",inputPattern:/^https?:\/\/.+/,inputErrorMessage:"请输入正确的域名格式(以http://或https://开头)"}).then(({value:t})=>{$(t).then(()=>{m.success("域名修改成功"),o.getIndex()}).catch(()=>{m.error("域名修改失败")})}).catch(()=>{})},o=new B(new A("/admin/Videos/"),{pk:"id",column:[{type:"selection",align:"center",operator:!1},{label:a("videos.id"),prop:"id",align:"center",width:70,operator:"RANGE",sortable:"custom"},{label:a("videos.videocategory__name"),prop:"videoCategory.name",align:"center",render:"tags",operator:!1,width:160},{label:a("videos.videocategory__name"),prop:"video_category_ids",align:"center",operator:"FIND_IN_SET",show:!1,comSearchRender:"remoteSelect",remote:{pk:"category.id",field:"name",remoteUrl:"/admin/video.Category/index",multiple:!0}},{label:a("videos.name"),prop:"name",align:"center",operatorPlaceholder:a("Fuzzy query"),operator:"LIKE",sortable:!1,width:400},{label:"封面",prop:"image",align:"center",render:"image",operator:!1,width:120},{label:"m3u8",prop:"url",align:"center",operatorPlaceholder:a("Fuzzy query"),operator:"LIKE",sortable:!1,width:160},{label:"时长",prop:"duration",align:"center",operatorPlaceholder:a("Fuzzy query"),operator:"LIKE",sortable:!1},{label:"总浏览",prop:"total_views",align:"center",render:"tag",operator:"RANGE",sortable:!0,width:95},{label:"总点击",prop:"total_clicks",align:"center",render:"tag",operator:"RANGE",sortable:!0,width:95},{label:"总购买",prop:"total_purchases",align:"center",render:"tag",operator:"RANGE",sortable:!0,width:95},{label:"总转化",prop:"total_conversion_rate",align:"center",render:"tag",operator:"RANGE",sortable:!0,width:95},{label:"今浏览",prop:"today_views",align:"center",render:"tag",operator:"RANGE",sortable:!0,width:95},{label:"今点击",prop:"today_clicks",align:"center",render:"tag",operator:"RANGE",sortable:!0,width:95},{label:"今购买",prop:"today_purchases",align:"center",render:"tag",operator:"RANGE",sortable:!0,width:95},{label:"今转化",prop:"today_conversion_rate",align:"center",render:"tag",operator:"RANGE",sortable:!0,width:95},{label:a("videos.create_time"),prop:"create_time",align:"center",render:"datetime",operator:"RANGE",sortable:"custom",width:160,timeFormat:"yyyy-mm-dd hh:MM:ss"},{label:a("Operate"),align:"center",width:100,render:"buttons",buttons:_,operator:!1}],dblClickNotEditColumn:[void 0]},{defaultItems:{}});return M("baTable",o),P(()=>{var t;o.table.ref=v.value,o.mount(),(t=o.getIndex())==null||t.then(()=>{o.initSort(),o.dragSort()})}),(t,e)=>{const b=h("el-alert"),r=h("Icon"),l=h("el-button"),n=J("blur");return i(),H("div",L,[g(o).table.remark?(i(),p(b,{key:0,class:"ba-table-alert",title:g(o).table.remark,type:"info","show-icon":""},null,8,["title"])):K("",!0),s(D,{buttons:["refresh","add","edit","delete","comSearch","quickSearch","columnDisplay"],"quick-search-placeholder":g(a)("Quick search placeholder",{fields:g(a)("videos.quick Search Fields")})},{default:d(()=>[c((i(),p(l,{class:"table-header-operate",type:"danger",style:{"margin-left":"10px"},onClick:e[0]||(e[0]=f=>w())},{default:d(()=>[s(r,{color:"#ffffff",name:"el-icon-RefreshRight"}),e[6]||(e[6]=u("span",{class:"table-header-operate-text"},"一键更新静态资源",-1))]),_:1})),[[n]]),c((i(),p(l,{class:"table-header-operate",type:"danger",onClick:e[1]||(e[1]=f=>x())},{default:d(()=>[s(r,{color:"#ffffff",name:"el-icon-CaretRight"}),e[7]||(e[7]=u("span",{class:"table-header-operate-text"},"定时更新静态资源",-1))]),_:1})),[[n]]),c((i(),p(l,{class:"table-header-operate",type:"danger",onClick:e[2]||(e[2]=f=>k())},{default:d(()=>[s(r,{color:"#ffffff",name:"el-icon-Delete"}),e[8]||(e[8]=u("span",{class:"table-header-operate-text"},"清空热门数据",-1))]),_:1})),[[n]]),c((i(),p(l,{class:"table-header-operate",type:"success",onClick:e[3]||(e[3]=f=>E())},{default:d(()=>[s(r,{color:"#ffffff",name:"el-icon-Files"}),e[9]||(e[9]=u("span",{class:"table-header-operate-text"},"导入视频",-1))]),_:1})),[[n]]),c((i(),p(l,{class:"table-header-operate",type:"warning",onClick:e[4]||(e[4]=f=>N())},{default:d(()=>[s(r,{color:"#ffffff",name:"el-icon-Files"}),e[10]||(e[10]=u("span",{class:"table-header-operate-text"},"一键修改视频域名",-1))]),_:1})),[[n]]),c((i(),p(l,{class:"table-header-operate",type:"warning",onClick:e[5]||(e[5]=f=>I())},{default:d(()=>[s(r,{color:"#ffffff",name:"el-icon-Files"}),e[11]||(e[11]=u("span",{class:"table-header-operate-text"},"一键修改图片域名",-1))]),_:1})),[[n]])]),_:1},8,["quick-search-placeholder"]),s(F,{ref_key:"tableRef",ref:v},null,512),s(C)])}}});export{ee as default};
