import{y as N,a6 as q}from"./index-Uh2DvTxI.js";import{_ as S}from"./popupForm.vue_vue_type_script_setup_true_lang-BD-9Gw3F.js";import{e as T}from"./real-DdP6x1xu.js";import{d as V,b as R,T as F,a as A}from"./index-Cy849dwq.js";import{e as B,p as D,a as L,ar as M,z as P,m as i,W as G,o as d,h as K,v as p,N as u,V as U,l as a,O as r,Z as $,k as y,U as m,T as b,af as f}from"./vue-Dm6y8Cub.js";import"./index-5VskOyQt.js";import"./validate-BpEBWjy-.js";import"./index-Ccg1w6vP.js";const O={class:"default-main ba-table-box"},j={slot:"footer",class:"dialog-footer"},ae=B({name:"link",__name:"index",setup(H){const{t:e}=N.useI18n(),_=D(),g=V(["edit","delete"]),n=L({show:!1,data:[],selectedIds:[]}),w=o=>{n.selectedIds=o.map(t=>t.id)},v=async()=>{const o=l.getSelectionIds();if(o.length===0){f.warning(e("Please select at least one item"));return}try{const t=await T(o.join(","));t.code===1?(n.data=t.data,n.show=!0):f.error(t.msg||"检测失败")}catch(t){console.error(t),f.error("操作失败")}},l=new R(new q("/admin/Link/"),{pk:"id",column:[{type:"selection",align:"center",operator:!1},{label:e("link.id"),prop:"id",align:"center",width:70,operator:"RANGE",sortable:"custom"},{label:e("link.bucket"),prop:"bucket",align:"center",operatorPlaceholder:e("Fuzzy query"),operator:"LIKE",sortable:!1},{label:e("link.user_id"),prop:"user_id",align:"center",operator:"RANGE",sortable:!1},{label:e("link.url"),prop:"url",align:"center",operatorPlaceholder:e("Fuzzy query"),operator:"LIKE",sortable:!1},{label:e("link.zzurl"),prop:"zzurl",align:"center",operatorPlaceholder:e("Fuzzy query"),operator:"LIKE",sortable:!1},{label:e("link.ldurl"),prop:"ldurl",align:"center",operatorPlaceholder:e("Fuzzy query"),operator:"LIKE",sortable:!1},{label:e("link.status"),prop:"status",align:"center",render:"switch",operator:"eq",sortable:!1,replaceValue:{0:e("link.status 0"),1:e("link.status 1")}},{label:e("link.create_time"),prop:"create_time",align:"center",render:"datetime",operator:"RANGE",sortable:"custom",width:160,timeFormat:"yyyy-mm-dd hh:MM:ss"},{label:e("link.update_time"),prop:"update_time",align:"center",render:"datetime",operator:"RANGE",sortable:"custom",width:160,timeFormat:"yyyy-mm-dd hh:MM:ss"},{label:e("Operate"),align:"center",width:100,render:"buttons",buttons:g,operator:!1}],dblClickNotEditColumn:[void 0,"status"]},{defaultItems:{status:"1"}});return M("baTable",l),P(()=>{var o;l.table.ref=_.value,l.mount(),(o=l.getIndex())==null||o.then(()=>{l.initSort(),l.dragSort()})}),(o,t)=>{const I=i("el-alert"),z=i("Icon"),h=i("el-button"),c=i("el-table-column"),k=i("el-tag"),E=i("el-table"),x=i("el-dialog"),C=G("blur");return d(),K("div",O,[p(l).table.remark?(d(),u(I,{key:0,class:"ba-table-alert",title:p(l).table.remark,type:"info","show-icon":""},null,8,["title"])):U("",!0),a(F,{buttons:["refresh","add","edit","delete","comSearch","quickSearch","columnDisplay"],"quick-search-placeholder":p(e)("Quick search placeholder",{fields:p(e)("link.quick Search Fields")})},{default:r(()=>[$((d(),u(h,{class:"table-header-operate",type:"danger",style:{"margin-left":"10px"},onClick:t[0]||(t[0]=s=>v())},{default:r(()=>[a(z,{color:"#ffffff",name:"el-icon-RefreshRight"}),t[3]||(t[3]=y("span",{class:"table-header-operate-text"},"一键检测",-1))]),_:1})),[[C]])]),_:1},8,["quick-search-placeholder"]),a(A,{ref_key:"tableRef",ref:_},null,512),a(S),a(x,{modelValue:n.show,"onUpdate:modelValue":t[2]||(t[2]=s=>n.show=s),title:"链接检测结果",width:"1300px"},{default:r(()=>[a(E,{data:n.data,style:{width:"100%"},onSelectionChange:w},{default:r(()=>[a(c,{type:"selection",width:"55"}),a(c,{prop:"id",label:"ID",width:"80"}),a(c,{prop:"url",label:"地址","min-width":"900"}),a(c,{prop:"user_id",label:"代理id",width:"100"}),a(c,{prop:"info",label:"信息",width:"150"},{default:r(s=>[s.row.info=="域名微信内正常"?(d(),u(k,{key:0,type:"success"},{default:r(()=>[m(b(s.row.info),1)]),_:2},1024)):(d(),u(k,{key:1,type:"danger"},{default:r(()=>[m(b(s.row.info),1)]),_:2},1024))]),_:1})]),_:1},8,["data"]),y("span",j,[a(h,{onClick:t[1]||(t[1]=s=>n.show=!1)},{default:r(()=>[m(b(p(e)("Cancel")),1)]),_:1})])]),_:1},8,["modelValue"])])}}});export{ae as default};
