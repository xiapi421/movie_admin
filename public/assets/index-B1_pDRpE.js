import{y as z,a6 as q}from"./index-BFxxYa32.js";import{_ as N}from"./popupForm.vue_vue_type_script_setup_true_lang-CAf9P8AF.js";import{b as T}from"./real-WYGfPkCR.js";import{d as V,b as F,T as B,a as C}from"./index-Bn-Y15JL.js";import{e as K,p as R,a as S,ar as M,z as P,m as r,W as A,o as i,h as D,v as d,N as u,V as L,l as a,O as l,Z as U,k as O,U as _,T as h,af as b}from"./vue-Dm6y8Cub.js";import"./index-Bc7_3-IP.js";import"./validate-Blsf5TRT.js";import"./index-zS4Wn8x0.js";const G={class:"default-main ba-table-box"},ee=K({name:"bucket",__name:"index",setup($){const{t:e}=z.useI18n(),m=R(),y=V(["edit","delete"]),c=S({show:!1,data:[]}),k=async()=>{const s=o.getSelectionIds();if(s.length===0){b.warning(e("Please select at least one item"));return}try{const t=await T(s.join(","));t.code===1?(c.data=t.data,c.show=!0):b.error(t.msg)}catch(t){console.error(t),b.error(e("Operation failed"))}},o=new F(new q("/admin/Bucket/"),{pk:"id",column:[{type:"selection",align:"center",operator:!1},{label:e("bucket.id"),prop:"id",align:"center",width:70,operator:"RANGE",sortable:"custom"},{label:e("bucket.name"),prop:"name",align:"center",operatorPlaceholder:e("Fuzzy query"),operator:"LIKE",sortable:!1},{label:e("bucket.area"),prop:"area",align:"center",operatorPlaceholder:e("Fuzzy query"),operator:"LIKE",sortable:!1},{label:e("bucket.apiKey"),prop:"apiKey",align:"center",operatorPlaceholder:e("Fuzzy query"),operator:"LIKE",sortable:!1},{label:e("bucket.secret"),prop:"secret",align:"center",operatorPlaceholder:e("Fuzzy query"),operator:"LIKE",sortable:!1},{label:e("bucket.category"),prop:"category",align:"center",operatorPlaceholder:e("Fuzzy query"),operator:"LIKE",sortable:!1},{label:e("bucket.status"),prop:"status",align:"center",render:"switch",operator:"eq",sortable:!1,replaceValue:{0:e("bucket.status 0"),1:e("bucket.status 1")}},{label:e("bucket.create_time"),prop:"create_time",align:"center",render:"datetime",operator:"RANGE",sortable:"custom",width:160,timeFormat:"yyyy-mm-dd hh:MM:ss"},{label:e("bucket.update_time"),prop:"update_time",align:"center",render:"datetime",operator:"RANGE",sortable:"custom",width:160,timeFormat:"yyyy-mm-dd hh:MM:ss"},{label:e("Operate"),align:"center",width:100,render:"buttons",buttons:y,operator:!1}],dblClickNotEditColumn:[void 0,"status"]},{defaultItems:{status:"1"}});return M("baTable",o),P(()=>{var s;o.table.ref=m.value,o.mount(),(s=o.getIndex())==null||s.then(()=>{o.initSort(),o.dragSort()})}),(s,t)=>{const g=r("el-alert"),w=r("Icon"),v=r("el-button"),p=r("el-table-column"),f=r("el-tag"),E=r("el-table"),I=r("el-dialog"),x=A("blur");return i(),D("div",G,[d(o).table.remark?(i(),u(g,{key:0,class:"ba-table-alert",title:d(o).table.remark,type:"info","show-icon":""},null,8,["title"])):L("",!0),a(B,{buttons:["refresh","add","edit","delete","comSearch","quickSearch","columnDisplay"],"quick-search-placeholder":d(e)("Quick search placeholder",{fields:d(e)("bucket.quick Search Fields")})},{default:l(()=>[U((i(),u(v,{class:"table-header-operate",type:"danger",style:{"margin-left":"10px"},onClick:t[0]||(t[0]=n=>k())},{default:l(()=>[a(w,{color:"#ffffff",name:"el-icon-RefreshRight"}),t[2]||(t[2]=O("span",{class:"table-header-operate-text"},"检测防封",-1))]),_:1})),[[x]])]),_:1},8,["quick-search-placeholder"]),a(C,{ref_key:"tableRef",ref:m},null,512),a(N),a(I,{modelValue:c.show,"onUpdate:modelValue":t[1]||(t[1]=n=>c.show=n),title:"检测防封结果",width:"900px"},{default:l(()=>[a(E,{data:c.data,style:{width:"100%"}},{default:l(()=>[a(p,{prop:"id",label:"储存桶id",width:"80"}),a(p,{prop:"url",label:"储存桶地址","min-width":"400","show-overflow-tooltip":""}),a(p,{prop:"status",label:"状态"}),a(p,{prop:"info",label:"信息"},{default:l(n=>[n.row.info=="域名微信内正常"?(i(),u(f,{key:0,type:"success"},{default:l(()=>[_(h(n.row.info),1)]),_:2},1024)):(i(),u(f,{key:1,type:"danger"},{default:l(()=>[_(h(n.row.info),1)]),_:2},1024))]),_:1})]),_:1},8,["data"])]),_:1},8,["modelValue"])])}}});export{ee as default};
