import{y as R,a6 as C,ar as c}from"./index-DeL1CcdG.js";import{_ as I}from"./popupForm.vue_vue_type_script_setup_true_lang-DVi8eEVu.js";import{d as B,b as T,T as D,a as F}from"./index-DVRQVd9I.js";import{u as G,i as V,d as z,e as $}from"./real-DHhotG_g.js";import{e as q,p as P,ar as M,z as J,m as v,W as S,o as i,h as K,v as g,N as p,V as L,l as n,O as d,Z as u,k as f,af as m,ae as y}from"./vue-Dm6y8Cub.js";import"./index-D8kt8uBu.js";import"./index-CWd16Jrz.js";const H={class:"default-main ba-table-box"},ee=q({name:"video",__name:"index",setup(O){const{t}=R.useI18n(),h=P(),_=B(["edit","delete"]),w=()=>{console.log("updateJson"),G().then(()=>{})},k=()=>{console.log("autoUpdateJson")},x=()=>{console.log("clearHot")},E=()=>{const a=document.createElement("input");a.type="file",a.accept=".txt,.csv",a.onchange=e=>{var r;const b=(r=e.target.files)==null?void 0:r[0];if(b){const l=new FormData;l.append("file",b),V(l).then(s=>{m.success("导入成功"),o.getIndex()}).catch(s=>{m.error("导入失败："+s.message)})}},a.click()},A=()=>{y.prompt("请输入新的视频域名","修改视频域名",{confirmButtonText:"确定",cancelButtonText:"取消",inputPlaceholder:"请输入域名，例如: http://example.com",inputPattern:/^https?:\/\/.+/,inputErrorMessage:"请输入正确的域名格式(以http://或https://开头)"}).then(({value:a})=>{z(a).then(()=>{m.success("域名修改成功"),o.getIndex()}).catch(()=>{m.error("域名修改失败")})}).catch(()=>{})},N=()=>{y.prompt("请输入新的图片域名","修改图片域名",{confirmButtonText:"确定",cancelButtonText:"取消",inputPlaceholder:"请输入域名，例如: http://example.com",inputPattern:/^https?:\/\/.+/,inputErrorMessage:"请输入正确的域名格式(以http://或https://开头)"}).then(({value:a})=>{$(a).then(()=>{m.success("域名修改成功"),o.getIndex()}).catch(()=>{m.error("域名修改失败")})}).catch(()=>{})},o=new T(new C("/admin/Video/"),{pk:"id",column:[{type:"selection",align:"center",operator:!1},{label:t("video.id"),prop:"id",align:"center",width:70,operator:"RANGE",sortable:"custom"},{label:t("video.videocategory__name"),prop:"videoCategory.name",align:"center",operatorPlaceholder:t("Fuzzy query"),render:"tags",operator:"LIKE",width:100},{label:t("video.name"),prop:"name",align:"center",operatorPlaceholder:t("Fuzzy query"),operator:"LIKE",sortable:!1,width:200},{label:t("video.image"),prop:"image",align:"center",render:"image",operator:!1,width:160},{label:"视频地址",prop:"url",align:"center",operatorPlaceholder:t("Fuzzy query"),operator:"LIKE",sortable:!1,width:200},{label:"时长",prop:"duration",align:"center",operatorPlaceholder:t("Fuzzy query"),operator:"LIKE",sortable:!1},{label:"总浏览",prop:"total_views",align:"center",render:"tag",operator:"RANGE",sortable:!0,replaceValue:{},width:100},{label:"总点击",prop:"total_clicks",align:"center",render:"tag",operator:"RANGE",sortable:!0,width:100},{label:t("video.total_purchases"),prop:"total_purchases",align:"center",render:"tag",operator:"RANGE",sortable:!0,width:100},{label:"总转化%",prop:"total_conversion_rate",render:"tag",align:"center",operator:"RANGE",sortable:!0,width:110},{label:t("video.today_views"),prop:"today_views",align:"center",render:"tag",operator:"RANGE",sortable:!0,width:110},{label:t("video.today_clicks"),prop:"today_clicks",align:"center",render:"tag",operator:"RANGE",sortable:!0,width:110},{label:t("video.today_purchases"),prop:"today_purchases",align:"center",render:"tag",operator:"RANGE",sortable:!0,width:110},{label:t("video.today_conversion_rate"),prop:"today_conversion_rate",align:"center",render:"tag",operator:"RANGE",sortable:!0,width:120},{label:t("video.create_time"),prop:"create_time",align:"center",render:"datetime",operator:"RANGE",sortable:"custom",width:160,timeFormat:"yyyy-mm-dd hh:MM:ss"},{label:t("Operate"),align:"center",width:100,render:"buttons",buttons:_,operator:!1}],dblClickNotEditColumn:[void 0]},{defaultItems:{}});return M("baTable",o),J(()=>{var a;o.table.ref=h.value,o.mount(),(a=o.getIndex())==null||a.then(()=>{o.initSort(),o.dragSort()})}),(a,e)=>{const b=v("el-alert"),r=v("el-button"),l=S("blur");return i(),K("div",H,[g(o).table.remark?(i(),p(b,{key:0,class:"ba-table-alert",title:g(o).table.remark,type:"info","show-icon":""},null,8,["title"])):L("",!0),n(D,{buttons:["refresh","add","edit","delete","comSearch","quickSearch","columnDisplay"],"quick-search-placeholder":g(t)("Quick search placeholder",{fields:g(t)("video.quick Search Fields")})},{default:d(()=>[u((i(),p(r,{class:"table-header-operate",type:"danger",style:{"margin-left":"10px"},onClick:e[0]||(e[0]=s=>w())},{default:d(()=>[n(c,{color:"#ffffff",name:"el-icon-RefreshRight"}),e[6]||(e[6]=f("span",{class:"table-header-operate-text"},"一键更新静态资源",-1))]),_:1})),[[l]]),u((i(),p(r,{class:"table-header-operate",type:"danger",onClick:e[1]||(e[1]=s=>k())},{default:d(()=>[n(c,{color:"#ffffff",name:"el-icon-CaretRight"}),e[7]||(e[7]=f("span",{class:"table-header-operate-text"},"定时更新静态资源",-1))]),_:1})),[[l]]),u((i(),p(r,{class:"table-header-operate",type:"danger",onClick:e[2]||(e[2]=s=>x())},{default:d(()=>[n(c,{color:"#ffffff",name:"el-icon-Delete"}),e[8]||(e[8]=f("span",{class:"table-header-operate-text"},"清空热门数据",-1))]),_:1})),[[l]]),u((i(),p(r,{class:"table-header-operate",type:"success",onClick:e[3]||(e[3]=s=>E())},{default:d(()=>[n(c,{color:"#ffffff",name:"el-icon-Files"}),e[9]||(e[9]=f("span",{class:"table-header-operate-text"},"导入视频",-1))]),_:1})),[[l]]),u((i(),p(r,{class:"table-header-operate",type:"warning",onClick:e[4]||(e[4]=s=>A())},{default:d(()=>[n(c,{color:"#ffffff",name:"el-icon-Files"}),e[10]||(e[10]=f("span",{class:"table-header-operate-text"},"一键修改视频域名",-1))]),_:1})),[[l]]),u((i(),p(r,{class:"table-header-operate",type:"warning",onClick:e[5]||(e[5]=s=>N())},{default:d(()=>[n(c,{color:"#ffffff",name:"el-icon-Files"}),e[11]||(e[11]=f("span",{class:"table-header-operate-text"},"一键修改图片域名",-1))]),_:1})),[[l]])]),_:1},8,["quick-search-placeholder"]),n(F,{ref_key:"tableRef",ref:h},null,512),n(I)])}}});export{ee as default};
