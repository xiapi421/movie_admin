import{y as E,a6 as I}from"./index-a89m00ZZ.js";import{_ as z}from"./popupForm.vue_vue_type_script_setup_true_lang-D5C7_yRh.js";import{b as q}from"./real-_uPxEWJk.js";import{d as x,b as F,T as N,a as V}from"./index-_2pXKYgm.js";import{e as B,p as C,a as K,ar as R,z as T,m as l,W as M,o as p,h as P,v as n,N as m,V as S,l as a,O as i,Z as A,k as L,af as d}from"./vue-Dm6y8Cub.js";import"./index-0cs00J0z.js";import"./validate-CSwilFkA.js";import"./index-7hQ8xUGn.js";const D={class:"default-main ba-table-box"},J=B({name:"bucket",__name:"index",setup(O){const{t:e}=E.useI18n(),u=C(),f=x(["edit","delete"]),s=K({show:!1,data:[]}),h=async()=>{const o=r.getSelectionIds();if(o.length===0){d.warning(e("Please select at least one item"));return}try{const t=await q(o.join(","));t.code===1?(s.data=t.data,s.show=!0):d.error(t.msg)}catch(t){console.error(t),d.error(e("Operation failed"))}},r=new F(new I("/admin/Bucket/"),{pk:"id",column:[{type:"selection",align:"center",operator:!1},{label:e("bucket.id"),prop:"id",align:"center",width:70,operator:"RANGE",sortable:"custom"},{label:e("bucket.name"),prop:"name",align:"center",operatorPlaceholder:e("Fuzzy query"),operator:"LIKE",sortable:!1},{label:e("bucket.area"),prop:"area",align:"center",operatorPlaceholder:e("Fuzzy query"),operator:"LIKE",sortable:!1},{label:e("bucket.apiKey"),prop:"apiKey",align:"center",operatorPlaceholder:e("Fuzzy query"),operator:"LIKE",sortable:!1},{label:e("bucket.secret"),prop:"secret",align:"center",operatorPlaceholder:e("Fuzzy query"),operator:"LIKE",sortable:!1},{label:e("bucket.category"),prop:"category",align:"center",operatorPlaceholder:e("Fuzzy query"),operator:"LIKE",sortable:!1},{label:e("bucket.status"),prop:"status",align:"center",render:"switch",operator:"eq",sortable:!1,replaceValue:{0:e("bucket.status 0"),1:e("bucket.status 1")}},{label:e("bucket.create_time"),prop:"create_time",align:"center",render:"datetime",operator:"RANGE",sortable:"custom",width:160,timeFormat:"yyyy-mm-dd hh:MM:ss"},{label:e("bucket.update_time"),prop:"update_time",align:"center",render:"datetime",operator:"RANGE",sortable:"custom",width:160,timeFormat:"yyyy-mm-dd hh:MM:ss"},{label:e("Operate"),align:"center",width:100,render:"buttons",buttons:f,operator:!1}],dblClickNotEditColumn:[void 0,"status"]},{defaultItems:{status:"1"}});return R("baTable",r),T(()=>{var o;r.table.ref=u.value,r.mount(),(o=r.getIndex())==null||o.then(()=>{r.initSort(),r.dragSort()})}),(o,t)=>{const _=l("el-alert"),k=l("Icon"),y=l("el-button"),c=l("el-table-column"),g=l("el-table"),w=l("el-dialog"),v=M("blur");return p(),P("div",D,[n(r).table.remark?(p(),m(_,{key:0,class:"ba-table-alert",title:n(r).table.remark,type:"info","show-icon":""},null,8,["title"])):S("",!0),a(N,{buttons:["refresh","add","edit","delete","comSearch","quickSearch","columnDisplay"],"quick-search-placeholder":n(e)("Quick search placeholder",{fields:n(e)("bucket.quick Search Fields")})},{default:i(()=>[A((p(),m(y,{class:"table-header-operate",type:"danger",style:{"margin-left":"10px"},onClick:t[0]||(t[0]=b=>h())},{default:i(()=>[a(k,{color:"#ffffff",name:"el-icon-RefreshRight"}),t[2]||(t[2]=L("span",{class:"table-header-operate-text"},"检测防封",-1))]),_:1})),[[v]])]),_:1},8,["quick-search-placeholder"]),a(V,{ref_key:"tableRef",ref:u},null,512),a(z),a(w,{modelValue:s.show,"onUpdate:modelValue":t[1]||(t[1]=b=>s.show=b),title:n(e)("bucket.check url"),width:"600px"},{default:i(()=>[a(g,{data:s.data,style:{width:"100%"}},{default:i(()=>[a(c,{prop:"id",label:"储存桶id"}),a(c,{prop:"url",label:"储存桶地址"}),a(c,{prop:"status",label:"状态"}),a(c,{prop:"info",label:"信息"})]),_:1},8,["data"])]),_:1},8,["modelValue","title"])])}}});export{J as default};
